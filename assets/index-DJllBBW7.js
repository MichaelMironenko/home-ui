(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ar(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Fe={},ln=[],$t=()=>{},Ro=()=>!1,ps=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ur=e=>e.startsWith("onUpdate:"),rt=Object.assign,cr=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},el=Object.prototype.hasOwnProperty,Ie=(e,t)=>el.call(e,t),ye=Array.isArray,an=e=>Dn(e)==="[object Map]",Po=e=>Dn(e)==="[object Set]",Tr=e=>Dn(e)==="[object Date]",Se=e=>typeof e=="function",qe=e=>typeof e=="string",Et=e=>typeof e=="symbol",je=e=>e!==null&&typeof e=="object",Oo=e=>(je(e)||Se(e))&&Se(e.then)&&Se(e.catch),Io=Object.prototype.toString,Dn=e=>Io.call(e),tl=e=>Dn(e).slice(8,-1),No=e=>Dn(e)==="[object Object]",fr=e=>qe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,xn=ar(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hs=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},nl=/-\w/g,gt=hs(e=>e.replace(nl,t=>t.slice(1).toUpperCase())),sl=/\B([A-Z])/g,zt=hs(e=>e.replace(sl,"-$1").toLowerCase()),ms=hs(e=>e.charAt(0).toUpperCase()+e.slice(1)),$s=hs(e=>e?`on${ms(e)}`:""),Ut=(e,t)=>!Object.is(e,t),Yn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Vo=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Bs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Rr;const gs=()=>Rr||(Rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function et(e){if(ye(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=qe(s)?ll(s):et(s);if(r)for(const o in r)t[o]=r[o]}return t}else if(qe(e)||je(e))return e}const rl=/;(?![^(]*\))/g,ol=/:([^]+)/,il=/\/\*[^]*?\*\//g;function ll(e){const t={};return e.replace(il,"").split(rl).forEach(n=>{if(n){const s=n.split(ol);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ue(e){let t="";if(qe(e))t=e;else if(ye(e))for(let n=0;n<e.length;n++){const s=Ue(e[n]);s&&(t+=s+" ")}else if(je(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const al="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ul=ar(al);function Fo(e){return!!e||e===""}function cl(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=es(e[s],t[s]);return n}function es(e,t){if(e===t)return!0;let n=Tr(e),s=Tr(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Et(e),s=Et(t),n||s)return e===t;if(n=ye(e),s=ye(t),n||s)return n&&s?cl(e,t):!1;if(n=je(e),s=je(t),n||s){if(!n||!s)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const i in e){const l=e.hasOwnProperty(i),a=t.hasOwnProperty(i);if(l&&!a||!l&&a||!es(e[i],t[i]))return!1}}return String(e)===String(t)}const jo=e=>!!(e&&e.__v_isRef===!0),ae=e=>qe(e)?e:e==null?"":ye(e)||je(e)&&(e.toString===Io||!Se(e.toString))?jo(e)?ae(e.value):JSON.stringify(e,Do,2):String(e),Do=(e,t)=>jo(t)?Do(e,t.value):an(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],o)=>(n[Ms(s,o)+" =>"]=r,n),{})}:Po(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ms(n))}:Et(t)?Ms(t):je(t)&&!ye(t)&&!No(t)?String(t):t,Ms=(e,t="")=>{var n;return Et(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ut;class fl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ut,!t&&ut&&(this.index=(ut.scopes||(ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ut;try{return ut=this,t()}finally{ut=n}}}on(){++this._on===1&&(this.prevScope=ut,ut=this)}off(){this._on>0&&--this._on===0&&(ut=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function dl(){return ut}let De;const Es=new WeakSet;class Lo{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ut&&ut.active&&ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Es.has(this)&&(Es.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ho(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pr(this),Uo(this);const t=De,n=vt;De=this,vt=!0;try{return this.fn()}finally{Bo(this),De=t,vt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)hr(t);this.deps=this.depsTail=void 0,Pr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Es.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ws(this)&&this.run()}get dirty(){return Ws(this)}}let Ko=0,kn,$n;function Ho(e,t=!1){if(e.flags|=8,t){e.next=$n,$n=e;return}e.next=kn,kn=e}function dr(){Ko++}function pr(){if(--Ko>0)return;if($n){let t=$n;for($n=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;kn;){let t=kn;for(kn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Uo(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bo(e){let t,n=e.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),hr(s),pl(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}e.deps=t,e.depsTail=n}function Ws(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wo(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wo(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Pn)||(e.globalVersion=Pn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ws(e))))return;e.flags|=2;const t=e.dep,n=De,s=vt;De=e,vt=!0;try{Uo(e);const r=e.fn(e._value);(t.version===0||Ut(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{De=n,vt=s,Bo(e),e.flags&=-3}}function hr(e,t=!1){const{dep:n,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)hr(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function pl(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let vt=!0;const zo=[];function Nt(){zo.push(vt),vt=!1}function Vt(){const e=zo.pop();vt=e===void 0?!0:e}function Pr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=De;De=void 0;try{t()}finally{De=n}}}let Pn=0;class hl{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class mr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!De||!vt||De===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==De)n=this.activeLink=new hl(De,this),De.deps?(n.prevDep=De.depsTail,De.depsTail.nextDep=n,De.depsTail=n):De.deps=De.depsTail=n,Go(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=De.depsTail,n.nextDep=void 0,De.depsTail.nextDep=n,De.depsTail=n,De.deps===n&&(De.deps=s)}return n}trigger(t){this.version++,Pn++,this.notify(t)}notify(t){dr();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{pr()}}}function Go(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Go(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const zs=new WeakMap,en=Symbol(""),Gs=Symbol(""),On=Symbol("");function tt(e,t,n){if(vt&&De){let s=zs.get(e);s||zs.set(e,s=new Map);let r=s.get(n);r||(s.set(n,r=new mr),r.map=s,r.key=n),r.track()}}function Pt(e,t,n,s,r,o){const i=zs.get(e);if(!i){Pn++;return}const l=a=>{a&&a.trigger()};if(dr(),t==="clear")i.forEach(l);else{const a=ye(e),c=a&&fr(n);if(a&&n==="length"){const u=Number(s);i.forEach((p,_)=>{(_==="length"||_===On||!Et(_)&&_>=u)&&l(p)})}else switch((n!==void 0||i.has(void 0))&&l(i.get(n)),c&&l(i.get(On)),t){case"add":a?c&&l(i.get("length")):(l(i.get(en)),an(e)&&l(i.get(Gs)));break;case"delete":a||(l(i.get(en)),an(e)&&l(i.get(Gs)));break;case"set":an(e)&&l(i.get(en));break}}pr()}function sn(e){const t=Oe(e);return t===e?t:(tt(t,"iterate",On),mt(e)?t:t.map(Ye))}function vs(e){return tt(e=Oe(e),"iterate",On),e}const ml={__proto__:null,[Symbol.iterator](){return Cs(this,Symbol.iterator,Ye)},concat(...e){return sn(this).concat(...e.map(t=>ye(t)?sn(t):t))},entries(){return Cs(this,"entries",e=>(e[1]=Ye(e[1]),e))},every(e,t){return At(this,"every",e,t,void 0,arguments)},filter(e,t){return At(this,"filter",e,t,n=>n.map(Ye),arguments)},find(e,t){return At(this,"find",e,t,Ye,arguments)},findIndex(e,t){return At(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return At(this,"findLast",e,t,Ye,arguments)},findLastIndex(e,t){return At(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return At(this,"forEach",e,t,void 0,arguments)},includes(...e){return As(this,"includes",e)},indexOf(...e){return As(this,"indexOf",e)},join(e){return sn(this).join(e)},lastIndexOf(...e){return As(this,"lastIndexOf",e)},map(e,t){return At(this,"map",e,t,void 0,arguments)},pop(){return yn(this,"pop")},push(...e){return yn(this,"push",e)},reduce(e,...t){return Or(this,"reduce",e,t)},reduceRight(e,...t){return Or(this,"reduceRight",e,t)},shift(){return yn(this,"shift")},some(e,t){return At(this,"some",e,t,void 0,arguments)},splice(...e){return yn(this,"splice",e)},toReversed(){return sn(this).toReversed()},toSorted(e){return sn(this).toSorted(e)},toSpliced(...e){return sn(this).toSpliced(...e)},unshift(...e){return yn(this,"unshift",e)},values(){return Cs(this,"values",Ye)}};function Cs(e,t,n){const s=vs(e),r=s[t]();return s!==e&&!mt(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.done||(o.value=n(o.value)),o}),r}const gl=Array.prototype;function At(e,t,n,s,r,o){const i=vs(e),l=i!==e&&!mt(e),a=i[t];if(a!==gl[t]){const p=a.apply(e,o);return l?Ye(p):p}let c=n;i!==e&&(l?c=function(p,_){return n.call(this,Ye(p),_,e)}:n.length>2&&(c=function(p,_){return n.call(this,p,_,e)}));const u=a.call(i,c,s);return l&&r?r(u):u}function Or(e,t,n,s){const r=vs(e);let o=n;return r!==e&&(mt(e)?n.length>3&&(o=function(i,l,a){return n.call(this,i,l,a,e)}):o=function(i,l,a){return n.call(this,i,Ye(l),a,e)}),r[t](o,...s)}function As(e,t,n){const s=Oe(e);tt(s,"iterate",On);const r=s[t](...n);return(r===-1||r===!1)&&yr(n[0])?(n[0]=Oe(n[0]),s[t](...n)):r}function yn(e,t,n=[]){Nt(),dr();const s=Oe(e)[t].apply(e,n);return pr(),Vt(),s}const vl=ar("__proto__,__v_isRef,__isVue"),qo=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Et));function yl(e){Et(e)||(e=String(e));const t=Oe(this);return tt(t,"has",e),t.hasOwnProperty(e)}class Jo{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(r?o?Cl:Zo:o?Qo:Xo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=ye(t);if(!r){let a;if(i&&(a=ml[n]))return a;if(n==="hasOwnProperty")return yl}const l=Reflect.get(t,n,st(t)?t:s);if((Et(n)?qo.has(n):vl(n))||(r||tt(t,"get",n),o))return l;if(st(l)){const a=i&&fr(n)?l:l.value;return r&&je(a)?Js(a):a}return je(l)?r?Js(l):tn(l):l}}class Yo extends Jo{constructor(t=!1){super(!1,t)}set(t,n,s,r){let o=t[n];if(!this._isShallow){const a=Bt(o);if(!mt(s)&&!Bt(s)&&(o=Oe(o),s=Oe(s)),!ye(t)&&st(o)&&!st(s))return a||(o.value=s),!0}const i=ye(t)&&fr(n)?Number(n)<t.length:Ie(t,n),l=Reflect.set(t,n,s,st(t)?t:r);return t===Oe(r)&&(i?Ut(s,o)&&Pt(t,"set",n,s):Pt(t,"add",n,s)),l}deleteProperty(t,n){const s=Ie(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Pt(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!Et(n)||!qo.has(n))&&tt(t,"has",n),s}ownKeys(t){return tt(t,"iterate",ye(t)?"length":en),Reflect.ownKeys(t)}}class _l extends Jo{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const bl=new Yo,wl=new _l,Sl=new Yo(!0);const qs=e=>e,Wn=e=>Reflect.getPrototypeOf(e);function xl(e,t,n){return function(...s){const r=this.__v_raw,o=Oe(r),i=an(o),l=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,c=r[e](...s),u=n?qs:t?ts:Ye;return!t&&tt(o,"iterate",a?Gs:en),{next(){const{value:p,done:_}=c.next();return _?{value:p,done:_}:{value:l?[u(p[0]),u(p[1])]:u(p),done:_}},[Symbol.iterator](){return this}}}}function zn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kl(e,t){const n={get(r){const o=this.__v_raw,i=Oe(o),l=Oe(r);e||(Ut(r,l)&&tt(i,"get",r),tt(i,"get",l));const{has:a}=Wn(i),c=t?qs:e?ts:Ye;if(a.call(i,r))return c(o.get(r));if(a.call(i,l))return c(o.get(l));o!==i&&o.get(r)},get size(){const r=this.__v_raw;return!e&&tt(Oe(r),"iterate",en),r.size},has(r){const o=this.__v_raw,i=Oe(o),l=Oe(r);return e||(Ut(r,l)&&tt(i,"has",r),tt(i,"has",l)),r===l?o.has(r):o.has(r)||o.has(l)},forEach(r,o){const i=this,l=i.__v_raw,a=Oe(l),c=t?qs:e?ts:Ye;return!e&&tt(a,"iterate",en),l.forEach((u,p)=>r.call(o,c(u),c(p),i))}};return rt(n,e?{add:zn("add"),set:zn("set"),delete:zn("delete"),clear:zn("clear")}:{add(r){!t&&!mt(r)&&!Bt(r)&&(r=Oe(r));const o=Oe(this);return Wn(o).has.call(o,r)||(o.add(r),Pt(o,"add",r,r)),this},set(r,o){!t&&!mt(o)&&!Bt(o)&&(o=Oe(o));const i=Oe(this),{has:l,get:a}=Wn(i);let c=l.call(i,r);c||(r=Oe(r),c=l.call(i,r));const u=a.call(i,r);return i.set(r,o),c?Ut(o,u)&&Pt(i,"set",r,o):Pt(i,"add",r,o),this},delete(r){const o=Oe(this),{has:i,get:l}=Wn(o);let a=i.call(o,r);a||(r=Oe(r),a=i.call(o,r)),l&&l.call(o,r);const c=o.delete(r);return a&&Pt(o,"delete",r,void 0),c},clear(){const r=Oe(this),o=r.size!==0,i=r.clear();return o&&Pt(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=xl(r,e,t)}),n}function gr(e,t){const n=kl(e,t);return(s,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(Ie(n,r)&&r in s?n:s,r,o)}const $l={get:gr(!1,!1)},Ml={get:gr(!1,!0)},El={get:gr(!0,!1)};const Xo=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Cl=new WeakMap;function Al(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Tl(e){return e.__v_skip||!Object.isExtensible(e)?0:Al(tl(e))}function tn(e){return Bt(e)?e:vr(e,!1,bl,$l,Xo)}function ei(e){return vr(e,!1,Sl,Ml,Qo)}function Js(e){return vr(e,!0,wl,El,Zo)}function vr(e,t,n,s,r){if(!je(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Tl(e);if(o===0)return e;const i=r.get(e);if(i)return i;const l=new Proxy(e,o===2?s:n);return r.set(e,l),l}function un(e){return Bt(e)?un(e.__v_raw):!!(e&&e.__v_isReactive)}function Bt(e){return!!(e&&e.__v_isReadonly)}function mt(e){return!!(e&&e.__v_isShallow)}function yr(e){return e?!!e.__v_raw:!1}function Oe(e){const t=e&&e.__v_raw;return t?Oe(t):e}function Rl(e){return!Ie(e,"__v_skip")&&Object.isExtensible(e)&&Vo(e,"__v_skip",!0),e}const Ye=e=>je(e)?tn(e):e,ts=e=>je(e)?Js(e):e;function st(e){return e?e.__v_isRef===!0:!1}function Ee(e){return ti(e,!1)}function Pl(e){return ti(e,!0)}function ti(e,t){return st(e)?e:new Ol(e,t)}class Ol{constructor(t,n){this.dep=new mr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Oe(t),this._value=n?t:Ye(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||mt(t)||Bt(t);t=s?t:Oe(t),Ut(t,n)&&(this._rawValue=t,this._value=s?t:Ye(t),this.dep.trigger())}}function It(e){return st(e)?e.value:e}const Il={get:(e,t,n)=>t==="__v_raw"?e:It(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return st(r)&&!st(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function ni(e){return un(e)?e:new Proxy(e,Il)}class Nl{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new mr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&De!==this)return Ho(this,!0),!0}get value(){const t=this.dep.track();return Wo(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vl(e,t,n=!1){let s,r;return Se(e)?s=e:(s=e.get,r=e.set),new Nl(s,r,n)}const Gn={},ns=new WeakMap;let Xt;function Fl(e,t=!1,n=Xt){if(n){let s=ns.get(n);s||ns.set(n,s=[]),s.push(e)}}function jl(e,t,n=Fe){const{immediate:s,deep:r,once:o,scheduler:i,augmentJob:l,call:a}=n,c=w=>r?w:mt(w)||r===!1||r===0?Ot(w,1):Ot(w);let u,p,_,v,R=!1,f=!1;if(st(e)?(p=()=>e.value,R=mt(e)):un(e)?(p=()=>c(e),R=!0):ye(e)?(f=!0,R=e.some(w=>un(w)||mt(w)),p=()=>e.map(w=>{if(st(w))return w.value;if(un(w))return c(w);if(Se(w))return a?a(w,2):w()})):Se(e)?t?p=a?()=>a(e,2):e:p=()=>{if(_){Nt();try{_()}finally{Vt()}}const w=Xt;Xt=u;try{return a?a(e,3,[v]):e(v)}finally{Xt=w}}:p=$t,t&&r){const w=p,y=r===!0?1/0:r;p=()=>Ot(w(),y)}const x=dl(),M=()=>{u.stop(),x&&x.active&&cr(x.effects,u)};if(o&&t){const w=t;t=(...y)=>{w(...y),M()}}let B=f?new Array(e.length).fill(Gn):Gn;const X=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const y=u.run();if(r||R||(f?y.some((I,se)=>Ut(I,B[se])):Ut(y,B))){_&&_();const I=Xt;Xt=u;try{const se=[y,B===Gn?void 0:f&&B[0]===Gn?[]:B,v];B=y,a?a(t,3,se):t(...se)}finally{Xt=I}}}else u.run()};return l&&l(X),u=new Lo(p),u.scheduler=i?()=>i(X,!1):X,v=w=>Fl(w,!1,u),_=u.onStop=()=>{const w=ns.get(u);if(w){if(a)a(w,4);else for(const y of w)y();ns.delete(u)}},t?s?X(!0):B=u.run():i?i(X.bind(null,!0),!0):u.run(),M.pause=u.pause.bind(u),M.resume=u.resume.bind(u),M.stop=M,M}function Ot(e,t=1/0,n){if(t<=0||!je(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,st(e))Ot(e.value,t,n);else if(ye(e))for(let s=0;s<e.length;s++)Ot(e[s],t,n);else if(Po(e)||an(e))e.forEach(s=>{Ot(s,t,n)});else if(No(e)){for(const s in e)Ot(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ot(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ln(e,t,n,s){try{return s?e(...s):e()}catch(r){ys(r,t,n)}}function Ct(e,t,n,s){if(Se(e)){const r=Ln(e,t,n,s);return r&&Oo(r)&&r.catch(o=>{ys(o,t,n)}),r}if(ye(e)){const r=[];for(let o=0;o<e.length;o++)r.push(Ct(e[o],t,n,s));return r}}function ys(e,t,n,s=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Fe;if(t){let l=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let p=0;p<u.length;p++)if(u[p](e,a,c)===!1)return}l=l.parent}if(o){Nt(),Ln(o,null,10,[e,a,c]),Vt();return}}Dl(e,n,r,s,i)}function Dl(e,t,n,s=!0,r=!1){if(r)throw e;console.error(e)}const lt=[];let St=-1;const cn=[];let Lt=null,rn=0;const si=Promise.resolve();let ss=null;function ri(e){const t=ss||si;return e?t.then(this?e.bind(this):e):t}function Ll(e){let t=St+1,n=lt.length;for(;t<n;){const s=t+n>>>1,r=lt[s],o=In(r);o<e||o===e&&r.flags&2?t=s+1:n=s}return t}function _r(e){if(!(e.flags&1)){const t=In(e),n=lt[lt.length-1];!n||!(e.flags&2)&&t>=In(n)?lt.push(e):lt.splice(Ll(t),0,e),e.flags|=1,oi()}}function oi(){ss||(ss=si.then(li))}function Kl(e){ye(e)?cn.push(...e):Lt&&e.id===-1?Lt.splice(rn+1,0,e):e.flags&1||(cn.push(e),e.flags|=1),oi()}function Ir(e,t,n=St+1){for(;n<lt.length;n++){const s=lt[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;lt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ii(e){if(cn.length){const t=[...new Set(cn)].sort((n,s)=>In(n)-In(s));if(cn.length=0,Lt){Lt.push(...t);return}for(Lt=t,rn=0;rn<Lt.length;rn++){const n=Lt[rn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Lt=null,rn=0}}const In=e=>e.id==null?e.flags&2?-1:1/0:e.id;function li(e){try{for(St=0;St<lt.length;St++){const t=lt[St];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ln(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;St<lt.length;St++){const t=lt[St];t&&(t.flags&=-2)}St=-1,lt.length=0,ii(),ss=null,(lt.length||cn.length)&&li()}}let ft=null,ai=null;function rs(e){const t=ft;return ft=e,ai=e&&e.type.__scopeId||null,t}function os(e,t=ft,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&as(-1);const o=rs(t);let i;try{i=e(...r)}finally{rs(o),s._d&&as(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function Ys(e,t){if(ft===null)return e;const n=Ss(ft),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,i,l,a=Fe]=t[r];o&&(Se(o)&&(o={mounted:o,updated:o}),o.deep&&Ot(i),s.push({dir:o,instance:n,value:i,oldValue:void 0,arg:l,modifiers:a}))}return e}function Jt(e,t,n,s){const r=e.dirs,o=t&&t.dirs;for(let i=0;i<r.length;i++){const l=r[i];o&&(l.oldValue=o[i].value);let a=l.dir[s];a&&(Nt(),Ct(a,n,8,[e.el,l,e,t]),Vt())}}const Hl=Symbol("_vte"),Ul=e=>e.__isTeleport,Bl=Symbol("_leaveCb");function br(e,t){e.shapeFlag&6&&e.component?(e.transition=t,br(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ui(e,t){return Se(e)?rt({name:e.name},t,{setup:e}):e}function ci(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const is=new WeakMap;function Mn(e,t,n,s,r=!1){if(ye(e)){e.forEach((R,f)=>Mn(R,t&&(ye(t)?t[f]:t),n,s,r));return}if(En(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Mn(e,t,n,s.component.subTree);return}const o=s.shapeFlag&4?Ss(s.component):s.el,i=r?null:o,{i:l,r:a}=e,c=t&&t.r,u=l.refs===Fe?l.refs={}:l.refs,p=l.setupState,_=Oe(p),v=p===Fe?Ro:R=>Ie(_,R);if(c!=null&&c!==a){if(Nr(t),qe(c))u[c]=null,v(c)&&(p[c]=null);else if(st(c)){c.value=null;const R=t;R.k&&(u[R.k]=null)}}if(Se(a))Ln(a,l,12,[i,u]);else{const R=qe(a),f=st(a);if(R||f){const x=()=>{if(e.f){const M=R?v(a)?p[a]:u[a]:a.value;if(r)ye(M)&&cr(M,o);else if(ye(M))M.includes(o)||M.push(o);else if(R)u[a]=[o],v(a)&&(p[a]=u[a]);else{const B=[o];a.value=B,e.k&&(u[e.k]=B)}}else R?(u[a]=i,v(a)&&(p[a]=i)):f&&(a.value=i,e.k&&(u[e.k]=i))};if(i){const M=()=>{x(),is.delete(e)};M.id=-1,is.set(e,M),ct(M,n)}else Nr(e),x()}}}function Nr(e){const t=is.get(e);t&&(t.flags|=8,is.delete(e))}gs().requestIdleCallback;gs().cancelIdleCallback;const En=e=>!!e.type.__asyncLoader,fi=e=>e.type.__isKeepAlive;function Wl(e,t){di(e,"a",t)}function zl(e,t){di(e,"da",t)}function di(e,t,n=nt){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(_s(t,s,n),n){let r=n.parent;for(;r&&r.parent;)fi(r.parent.vnode)&&Gl(s,t,n,r),r=r.parent}}function Gl(e,t,n,s){const r=_s(t,e,s,!0);pi(()=>{cr(s[t],r)},n)}function _s(e,t,n=nt,s=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...i)=>{Nt();const l=Hn(n),a=Ct(t,n,e,i);return l(),Vt(),a});return s?r.unshift(o):r.push(o),o}}const Ft=e=>(t,n=nt)=>{(!Vn||e==="sp")&&_s(e,(...s)=>t(...s),n)},ql=Ft("bm"),Kn=Ft("m"),Jl=Ft("bu"),Yl=Ft("u"),Xl=Ft("bum"),pi=Ft("um"),Ql=Ft("sp"),Zl=Ft("rtg"),ea=Ft("rtc");function ta(e,t=nt){_s("ec",e,t)}const na="components";function Xs(e,t){return ra(na,e,!0,t)||e}const sa=Symbol.for("v-ndc");function ra(e,t,n=!0,s=!1){const r=ft||nt;if(r){const o=r.type;{const l=za(o,!1);if(l&&(l===t||l===gt(t)||l===ms(gt(t))))return o}const i=Vr(r[e]||o[e],t)||Vr(r.appContext[e],t);return!i&&s?o:i}}function Vr(e,t){return e&&(e[t]||e[gt(t)]||e[ms(gt(t))])}function it(e,t,n,s){let r;const o=n,i=ye(e);if(i||qe(e)){const l=i&&un(e);let a=!1,c=!1;l&&(a=!mt(e),c=Bt(e),e=vs(e)),r=new Array(e.length);for(let u=0,p=e.length;u<p;u++)r[u]=t(a?c?ts(Ye(e[u])):Ye(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,o)}else if(je(e))if(e[Symbol.iterator])r=Array.from(e,(l,a)=>t(l,a,void 0,o));else{const l=Object.keys(e);r=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];r[a]=t(e[u],u,a,o)}}else r=[];return r}const Qs=e=>e?Oi(e)?Ss(e):Qs(e.parent):null,Cn=rt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qs(e.parent),$root:e=>Qs(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>mi(e),$forceUpdate:e=>e.f||(e.f=()=>{_r(e.update)}),$nextTick:e=>e.n||(e.n=ri.bind(e.proxy)),$watch:e=>$a.bind(e)}),Ts=(e,t)=>e!==Fe&&!e.__isScriptSetup&&Ie(e,t),oa={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:o,accessCache:i,type:l,appContext:a}=e;let c;if(t[0]!=="$"){const v=i[t];if(v!==void 0)switch(v){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(Ts(s,t))return i[t]=1,s[t];if(r!==Fe&&Ie(r,t))return i[t]=2,r[t];if((c=e.propsOptions[0])&&Ie(c,t))return i[t]=3,o[t];if(n!==Fe&&Ie(n,t))return i[t]=4,n[t];Zs&&(i[t]=0)}}const u=Cn[t];let p,_;if(u)return t==="$attrs"&&tt(e.attrs,"get",""),u(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==Fe&&Ie(n,t))return i[t]=4,n[t];if(_=a.config.globalProperties,Ie(_,t))return _[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:o}=e;return Ts(r,t)?(r[t]=n,!0):s!==Fe&&Ie(s,t)?(s[t]=n,!0):Ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:o,type:i}},l){let a,c;return!!(n[l]||e!==Fe&&l[0]!=="$"&&Ie(e,l)||Ts(t,l)||(a=o[0])&&Ie(a,l)||Ie(s,l)||Ie(Cn,l)||Ie(r.config.globalProperties,l)||(c=i.__cssModules)&&c[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ie(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Fr(e){return ye(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Zs=!0;function ia(e){const t=mi(e),n=e.proxy,s=e.ctx;Zs=!1,t.beforeCreate&&jr(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:i,watch:l,provide:a,inject:c,created:u,beforeMount:p,mounted:_,beforeUpdate:v,updated:R,activated:f,deactivated:x,beforeDestroy:M,beforeUnmount:B,destroyed:X,unmounted:w,render:y,renderTracked:I,renderTriggered:se,errorCaptured:J,serverPrefetch:Y,expose:oe,inheritAttrs:re,components:ce,directives:N,filters:Z}=t;if(c&&la(c,s,null),i)for(const K in i){const W=i[K];Se(W)&&(s[K]=W.bind(n))}if(r){const K=r.call(n,n);je(K)&&(e.data=tn(K))}if(Zs=!0,o)for(const K in o){const W=o[K],be=Se(W)?W.bind(n,n):Se(W.get)?W.get.bind(n,n):$t,fe=!Se(W)&&Se(W.set)?W.set.bind(n):$t,Ce=te({get:be,set:fe});Object.defineProperty(s,K,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:xe=>Ce.value=xe})}if(l)for(const K in l)hi(l[K],s,n,K);if(a){const K=Se(a)?a.call(n):a;Reflect.ownKeys(K).forEach(W=>{Xn(W,K[W])})}u&&jr(u,e,"c");function j(K,W){ye(W)?W.forEach(be=>K(be.bind(n))):W&&K(W.bind(n))}if(j(ql,p),j(Kn,_),j(Jl,v),j(Yl,R),j(Wl,f),j(zl,x),j(ta,J),j(ea,I),j(Zl,se),j(Xl,B),j(pi,w),j(Ql,Y),ye(oe))if(oe.length){const K=e.exposed||(e.exposed={});oe.forEach(W=>{Object.defineProperty(K,W,{get:()=>n[W],set:be=>n[W]=be,enumerable:!0})})}else e.exposed||(e.exposed={});y&&e.render===$t&&(e.render=y),re!=null&&(e.inheritAttrs=re),ce&&(e.components=ce),N&&(e.directives=N),Y&&ci(e)}function la(e,t,n=$t){ye(e)&&(e=er(e));for(const s in e){const r=e[s];let o;je(r)?"default"in r?o=yt(r.from||s,r.default,!0):o=yt(r.from||s):o=yt(r),st(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[s]=o}}function jr(e,t,n){Ct(ye(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function hi(e,t,n,s){let r=s.includes(".")?Ci(n,s):()=>n[s];if(qe(e)){const o=t[e];Se(o)&&Mt(r,o)}else if(Se(e))Mt(r,e.bind(n));else if(je(e))if(ye(e))e.forEach(o=>hi(o,t,n,s));else{const o=Se(e.handler)?e.handler.bind(n):t[e.handler];Se(o)&&Mt(r,o,e)}}function mi(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,l=o.get(t);let a;return l?a=l:!r.length&&!n&&!s?a=t:(a={},r.length&&r.forEach(c=>ls(a,c,i,!0)),ls(a,t,i)),je(t)&&o.set(t,a),a}function ls(e,t,n,s=!1){const{mixins:r,extends:o}=t;o&&ls(e,o,n,!0),r&&r.forEach(i=>ls(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const l=aa[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const aa={data:Dr,props:Lr,emits:Lr,methods:Sn,computed:Sn,beforeCreate:ot,created:ot,beforeMount:ot,mounted:ot,beforeUpdate:ot,updated:ot,beforeDestroy:ot,beforeUnmount:ot,destroyed:ot,unmounted:ot,activated:ot,deactivated:ot,errorCaptured:ot,serverPrefetch:ot,components:Sn,directives:Sn,watch:ca,provide:Dr,inject:ua};function Dr(e,t){return t?e?function(){return rt(Se(e)?e.call(this,this):e,Se(t)?t.call(this,this):t)}:t:e}function ua(e,t){return Sn(er(e),er(t))}function er(e){if(ye(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ot(e,t){return e?[...new Set([].concat(e,t))]:t}function Sn(e,t){return e?rt(Object.create(null),e,t):t}function Lr(e,t){return e?ye(e)&&ye(t)?[...new Set([...e,...t])]:rt(Object.create(null),Fr(e),Fr(t??{})):t}function ca(e,t){if(!e)return t;if(!t)return e;const n=rt(Object.create(null),e);for(const s in t)n[s]=ot(e[s],t[s]);return n}function gi(){return{app:null,config:{isNativeTag:Ro,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fa=0;function da(e,t){return function(s,r=null){Se(s)||(s=rt({},s)),r!=null&&!je(r)&&(r=null);const o=gi(),i=new WeakSet,l=[];let a=!1;const c=o.app={_uid:fa++,_component:s,_props:r,_container:null,_context:o,_instance:null,version:qa,get config(){return o.config},set config(u){},use(u,...p){return i.has(u)||(u&&Se(u.install)?(i.add(u),u.install(c,...p)):Se(u)&&(i.add(u),u(c,...p))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,p){return p?(o.components[u]=p,c):o.components[u]},directive(u,p){return p?(o.directives[u]=p,c):o.directives[u]},mount(u,p,_){if(!a){const v=c._ceVNode||We(s,r);return v.appContext=o,_===!0?_="svg":_===!1&&(_=void 0),e(v,u,_),a=!0,c._container=u,u.__vue_app__=c,Ss(v.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Ct(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,p){return o.provides[u]=p,c},runWithContext(u){const p=fn;fn=c;try{return u()}finally{fn=p}}};return c}}let fn=null;function Xn(e,t){if(nt){let n=nt.provides;const s=nt.parent&&nt.parent.provides;s===n&&(n=nt.provides=Object.create(s)),n[e]=t}}function yt(e,t,n=!1){const s=Ka();if(s||fn){let r=fn?fn._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Se(t)?t.call(s&&s.proxy):t}}const vi={},yi=()=>Object.create(vi),_i=e=>Object.getPrototypeOf(e)===vi;function pa(e,t,n,s=!1){const r={},o=yi();e.propsDefaults=Object.create(null),bi(e,t,r,o);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);n?e.props=s?r:ei(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function ha(e,t,n,s){const{props:r,attrs:o,vnode:{patchFlag:i}}=e,l=Oe(r),[a]=e.propsOptions;let c=!1;if((s||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let p=0;p<u.length;p++){let _=u[p];if(bs(e.emitsOptions,_))continue;const v=t[_];if(a)if(Ie(o,_))v!==o[_]&&(o[_]=v,c=!0);else{const R=gt(_);r[R]=tr(a,l,R,v,e,!1)}else v!==o[_]&&(o[_]=v,c=!0)}}}else{bi(e,t,r,o)&&(c=!0);let u;for(const p in l)(!t||!Ie(t,p)&&((u=zt(p))===p||!Ie(t,u)))&&(a?n&&(n[p]!==void 0||n[u]!==void 0)&&(r[p]=tr(a,l,p,void 0,e,!0)):delete r[p]);if(o!==l)for(const p in o)(!t||!Ie(t,p))&&(delete o[p],c=!0)}c&&Pt(e.attrs,"set","")}function bi(e,t,n,s){const[r,o]=e.propsOptions;let i=!1,l;if(t)for(let a in t){if(xn(a))continue;const c=t[a];let u;r&&Ie(r,u=gt(a))?!o||!o.includes(u)?n[u]=c:(l||(l={}))[u]=c:bs(e.emitsOptions,a)||(!(a in s)||c!==s[a])&&(s[a]=c,i=!0)}if(o){const a=Oe(n),c=l||Fe;for(let u=0;u<o.length;u++){const p=o[u];n[p]=tr(r,a,p,c[p],e,!Ie(c,p))}}return i}function tr(e,t,n,s,r,o){const i=e[n];if(i!=null){const l=Ie(i,"default");if(l&&s===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&Se(a)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const u=Hn(r);s=c[n]=a.call(null,t),u()}}else s=a;r.ce&&r.ce._setProp(n,s)}i[0]&&(o&&!l?s=!1:i[1]&&(s===""||s===zt(n))&&(s=!0))}return s}const ma=new WeakMap;function wi(e,t,n=!1){const s=n?ma:t.propsCache,r=s.get(e);if(r)return r;const o=e.props,i={},l=[];let a=!1;if(!Se(e)){const u=p=>{a=!0;const[_,v]=wi(p,t,!0);rt(i,_),v&&l.push(...v)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!a)return je(e)&&s.set(e,ln),ln;if(ye(o))for(let u=0;u<o.length;u++){const p=gt(o[u]);Kr(p)&&(i[p]=Fe)}else if(o)for(const u in o){const p=gt(u);if(Kr(p)){const _=o[u],v=i[p]=ye(_)||Se(_)?{type:_}:rt({},_),R=v.type;let f=!1,x=!0;if(ye(R))for(let M=0;M<R.length;++M){const B=R[M],X=Se(B)&&B.name;if(X==="Boolean"){f=!0;break}else X==="String"&&(x=!1)}else f=Se(R)&&R.name==="Boolean";v[0]=f,v[1]=x,(f||Ie(v,"default"))&&l.push(p)}}const c=[i,l];return je(e)&&s.set(e,c),c}function Kr(e){return e[0]!=="$"&&!xn(e)}const wr=e=>e==="_"||e==="_ctx"||e==="$stable",Sr=e=>ye(e)?e.map(xt):[xt(e)],ga=(e,t,n)=>{if(t._n)return t;const s=os((...r)=>Sr(t(...r)),n);return s._c=!1,s},Si=(e,t,n)=>{const s=e._ctx;for(const r in e){if(wr(r))continue;const o=e[r];if(Se(o))t[r]=ga(r,o,s);else if(o!=null){const i=Sr(o);t[r]=()=>i}}},xi=(e,t)=>{const n=Sr(t);e.slots.default=()=>n},ki=(e,t,n)=>{for(const s in t)(n||!wr(s))&&(e[s]=t[s])},va=(e,t,n)=>{const s=e.slots=yi();if(e.vnode.shapeFlag&32){const r=t._;r?(ki(s,t,n),n&&Vo(s,"_",r,!0)):Si(t,s)}else t&&xi(e,t)},ya=(e,t,n)=>{const{vnode:s,slots:r}=e;let o=!0,i=Fe;if(s.shapeFlag&32){const l=t._;l?n&&l===1?o=!1:ki(r,t,n):(o=!t.$stable,Si(t,r)),i=t}else t&&(xi(e,t),i={default:1});if(o)for(const l in r)!wr(l)&&i[l]==null&&delete r[l]},ct=Oa;function _a(e){return ba(e)}function ba(e,t){const n=gs();n.__VUE__=!0;const{insert:s,remove:r,patchProp:o,createElement:i,createText:l,createComment:a,setText:c,setElementText:u,parentNode:p,nextSibling:_,setScopeId:v=$t,insertStaticContent:R}=e,f=(h,m,b,$=null,A=null,E=null,G=void 0,H=null,L=!!m.dynamicChildren)=>{if(h===m)return;h&&!_n(h,m)&&($=k(h),xe(h,A,E,!0),h=null),m.patchFlag===-2&&(L=!1,m.dynamicChildren=null);const{type:V,ref:le,shapeFlag:q}=m;switch(V){case ws:x(h,m,b,$);break;case Wt:M(h,m,b,$);break;case Ps:h==null&&B(m,b,$,G);break;case Le:ce(h,m,b,$,A,E,G,H,L);break;default:q&1?y(h,m,b,$,A,E,G,H,L):q&6?N(h,m,b,$,A,E,G,H,L):(q&64||q&128)&&V.process(h,m,b,$,A,E,G,H,L,z)}le!=null&&A?Mn(le,h&&h.ref,E,m||h,!m):le==null&&h&&h.ref!=null&&Mn(h.ref,null,E,h,!0)},x=(h,m,b,$)=>{if(h==null)s(m.el=l(m.children),b,$);else{const A=m.el=h.el;m.children!==h.children&&c(A,m.children)}},M=(h,m,b,$)=>{h==null?s(m.el=a(m.children||""),b,$):m.el=h.el},B=(h,m,b,$)=>{[h.el,h.anchor]=R(h.children,m,b,$,h.el,h.anchor)},X=({el:h,anchor:m},b,$)=>{let A;for(;h&&h!==m;)A=_(h),s(h,b,$),h=A;s(m,b,$)},w=({el:h,anchor:m})=>{let b;for(;h&&h!==m;)b=_(h),r(h),h=b;r(m)},y=(h,m,b,$,A,E,G,H,L)=>{m.type==="svg"?G="svg":m.type==="math"&&(G="mathml"),h==null?I(m,b,$,A,E,G,H,L):Y(h,m,A,E,G,H,L)},I=(h,m,b,$,A,E,G,H)=>{let L,V;const{props:le,shapeFlag:q,transition:ie,dirs:pe}=h;if(L=h.el=i(h.type,E,le&&le.is,le),q&8?u(L,h.children):q&16&&J(h.children,L,null,$,A,Rs(h,E),G,H),pe&&Jt(h,null,$,"created"),se(L,h,h.scopeId,G,$),le){for(const Ne in le)Ne!=="value"&&!xn(Ne)&&o(L,Ne,null,le[Ne],E,$);"value"in le&&o(L,"value",null,le.value,E),(V=le.onVnodeBeforeMount)&&wt(V,$,h)}pe&&Jt(h,null,$,"beforeMount");const $e=wa(A,ie);$e&&ie.beforeEnter(L),s(L,m,b),((V=le&&le.onVnodeMounted)||$e||pe)&&ct(()=>{V&&wt(V,$,h),$e&&ie.enter(L),pe&&Jt(h,null,$,"mounted")},A)},se=(h,m,b,$,A)=>{if(b&&v(h,b),$)for(let E=0;E<$.length;E++)v(h,$[E]);if(A){let E=A.subTree;if(m===E||Ti(E.type)&&(E.ssContent===m||E.ssFallback===m)){const G=A.vnode;se(h,G,G.scopeId,G.slotScopeIds,A.parent)}}},J=(h,m,b,$,A,E,G,H,L=0)=>{for(let V=L;V<h.length;V++){const le=h[V]=H?Kt(h[V]):xt(h[V]);f(null,le,m,b,$,A,E,G,H)}},Y=(h,m,b,$,A,E,G)=>{const H=m.el=h.el;let{patchFlag:L,dynamicChildren:V,dirs:le}=m;L|=h.patchFlag&16;const q=h.props||Fe,ie=m.props||Fe;let pe;if(b&&Yt(b,!1),(pe=ie.onVnodeBeforeUpdate)&&wt(pe,b,m,h),le&&Jt(m,h,b,"beforeUpdate"),b&&Yt(b,!0),(q.innerHTML&&ie.innerHTML==null||q.textContent&&ie.textContent==null)&&u(H,""),V?oe(h.dynamicChildren,V,H,b,$,Rs(m,A),E):G||W(h,m,H,null,b,$,Rs(m,A),E,!1),L>0){if(L&16)re(H,q,ie,b,A);else if(L&2&&q.class!==ie.class&&o(H,"class",null,ie.class,A),L&4&&o(H,"style",q.style,ie.style,A),L&8){const $e=m.dynamicProps;for(let Ne=0;Ne<$e.length;Ne++){const Re=$e[Ne],Xe=q[Re],Qe=ie[Re];(Qe!==Xe||Re==="value")&&o(H,Re,Xe,Qe,A,b)}}L&1&&h.children!==m.children&&u(H,m.children)}else!G&&V==null&&re(H,q,ie,b,A);((pe=ie.onVnodeUpdated)||le)&&ct(()=>{pe&&wt(pe,b,m,h),le&&Jt(m,h,b,"updated")},$)},oe=(h,m,b,$,A,E,G)=>{for(let H=0;H<m.length;H++){const L=h[H],V=m[H],le=L.el&&(L.type===Le||!_n(L,V)||L.shapeFlag&198)?p(L.el):b;f(L,V,le,null,$,A,E,G,!0)}},re=(h,m,b,$,A)=>{if(m!==b){if(m!==Fe)for(const E in m)!xn(E)&&!(E in b)&&o(h,E,m[E],null,A,$);for(const E in b){if(xn(E))continue;const G=b[E],H=m[E];G!==H&&E!=="value"&&o(h,E,H,G,A,$)}"value"in b&&o(h,"value",m.value,b.value,A)}},ce=(h,m,b,$,A,E,G,H,L)=>{const V=m.el=h?h.el:l(""),le=m.anchor=h?h.anchor:l("");let{patchFlag:q,dynamicChildren:ie,slotScopeIds:pe}=m;pe&&(H=H?H.concat(pe):pe),h==null?(s(V,b,$),s(le,b,$),J(m.children||[],b,le,A,E,G,H,L)):q>0&&q&64&&ie&&h.dynamicChildren?(oe(h.dynamicChildren,ie,b,A,E,G,H),(m.key!=null||A&&m===A.subTree)&&$i(h,m,!0)):W(h,m,b,le,A,E,G,H,L)},N=(h,m,b,$,A,E,G,H,L)=>{m.slotScopeIds=H,h==null?m.shapeFlag&512?A.ctx.activate(m,b,$,G,L):Z(m,b,$,A,E,G,L):me(h,m,L)},Z=(h,m,b,$,A,E,G)=>{const H=h.component=La(h,$,A);if(fi(h)&&(H.ctx.renderer=z),Ha(H,!1,G),H.asyncDep){if(A&&A.registerDep(H,j,G),!h.el){const L=H.subTree=We(Wt);M(null,L,m,b),h.placeholder=L.el}}else j(H,h,m,b,A,E,G)},me=(h,m,b)=>{const $=m.component=h.component;if(Ra(h,m,b))if($.asyncDep&&!$.asyncResolved){K($,m,b);return}else $.next=m,$.update();else m.el=h.el,$.vnode=m},j=(h,m,b,$,A,E,G)=>{const H=()=>{if(h.isMounted){let{next:q,bu:ie,u:pe,parent:$e,vnode:Ne}=h;{const ht=Mi(h);if(ht){q&&(q.el=Ne.el,K(h,q,G)),ht.asyncDep.then(()=>{h.isUnmounted||H()});return}}let Re=q,Xe;Yt(h,!1),q?(q.el=Ne.el,K(h,q,G)):q=Ne,ie&&Yn(ie),(Xe=q.props&&q.props.onVnodeBeforeUpdate)&&wt(Xe,$e,q,Ne),Yt(h,!0);const Qe=Ur(h),pt=h.subTree;h.subTree=Qe,f(pt,Qe,p(pt.el),k(pt),h,A,E),q.el=Qe.el,Re===null&&Pa(h,Qe.el),pe&&ct(pe,A),(Xe=q.props&&q.props.onVnodeUpdated)&&ct(()=>wt(Xe,$e,q,Ne),A)}else{let q;const{el:ie,props:pe}=m,{bm:$e,m:Ne,parent:Re,root:Xe,type:Qe}=h,pt=En(m);Yt(h,!1),$e&&Yn($e),!pt&&(q=pe&&pe.onVnodeBeforeMount)&&wt(q,Re,m),Yt(h,!0);{Xe.ce&&Xe.ce._def.shadowRoot!==!1&&Xe.ce._injectChildStyle(Qe);const ht=h.subTree=Ur(h);f(null,ht,b,$,h,A,E),m.el=ht.el}if(Ne&&ct(Ne,A),!pt&&(q=pe&&pe.onVnodeMounted)){const ht=m;ct(()=>wt(q,Re,ht),A)}(m.shapeFlag&256||Re&&En(Re.vnode)&&Re.vnode.shapeFlag&256)&&h.a&&ct(h.a,A),h.isMounted=!0,m=b=$=null}};h.scope.on();const L=h.effect=new Lo(H);h.scope.off();const V=h.update=L.run.bind(L),le=h.job=L.runIfDirty.bind(L);le.i=h,le.id=h.uid,L.scheduler=()=>_r(le),Yt(h,!0),V()},K=(h,m,b)=>{m.component=h;const $=h.vnode.props;h.vnode=m,h.next=null,ha(h,m.props,$,b),ya(h,m.children,b),Nt(),Ir(h),Vt()},W=(h,m,b,$,A,E,G,H,L=!1)=>{const V=h&&h.children,le=h?h.shapeFlag:0,q=m.children,{patchFlag:ie,shapeFlag:pe}=m;if(ie>0){if(ie&128){fe(V,q,b,$,A,E,G,H,L);return}else if(ie&256){be(V,q,b,$,A,E,G,H,L);return}}pe&8?(le&16&&ee(V,A,E),q!==V&&u(b,q)):le&16?pe&16?fe(V,q,b,$,A,E,G,H,L):ee(V,A,E,!0):(le&8&&u(b,""),pe&16&&J(q,b,$,A,E,G,H,L))},be=(h,m,b,$,A,E,G,H,L)=>{h=h||ln,m=m||ln;const V=h.length,le=m.length,q=Math.min(V,le);let ie;for(ie=0;ie<q;ie++){const pe=m[ie]=L?Kt(m[ie]):xt(m[ie]);f(h[ie],pe,b,null,A,E,G,H,L)}V>le?ee(h,A,E,!0,!1,q):J(m,b,$,A,E,G,H,L,q)},fe=(h,m,b,$,A,E,G,H,L)=>{let V=0;const le=m.length;let q=h.length-1,ie=le-1;for(;V<=q&&V<=ie;){const pe=h[V],$e=m[V]=L?Kt(m[V]):xt(m[V]);if(_n(pe,$e))f(pe,$e,b,null,A,E,G,H,L);else break;V++}for(;V<=q&&V<=ie;){const pe=h[q],$e=m[ie]=L?Kt(m[ie]):xt(m[ie]);if(_n(pe,$e))f(pe,$e,b,null,A,E,G,H,L);else break;q--,ie--}if(V>q){if(V<=ie){const pe=ie+1,$e=pe<le?m[pe].el:$;for(;V<=ie;)f(null,m[V]=L?Kt(m[V]):xt(m[V]),b,$e,A,E,G,H,L),V++}}else if(V>ie)for(;V<=q;)xe(h[V],A,E,!0),V++;else{const pe=V,$e=V,Ne=new Map;for(V=$e;V<=ie;V++){const S=m[V]=L?Kt(m[V]):xt(m[V]);S.key!=null&&Ne.set(S.key,V)}let Re,Xe=0;const Qe=ie-$e+1;let pt=!1,ht=0;const Gt=new Array(Qe);for(V=0;V<Qe;V++)Gt[V]=0;for(V=pe;V<=q;V++){const S=h[V];if(Xe>=Qe){xe(S,A,E,!0);continue}let U;if(S.key!=null)U=Ne.get(S.key);else for(Re=$e;Re<=ie;Re++)if(Gt[Re-$e]===0&&_n(S,m[Re])){U=Re;break}U===void 0?xe(S,A,E,!0):(Gt[U-$e]=V+1,U>=ht?ht=U:pt=!0,f(S,m[U],b,null,A,E,G,H,L),Xe++)}const g=pt?Sa(Gt):ln;for(Re=g.length-1,V=Qe-1;V>=0;V--){const S=$e+V,U=m[S],Q=m[S+1],_e=S+1<le?Q.el||Q.placeholder:$;Gt[V]===0?f(null,U,b,_e,A,E,G,H,L):pt&&(Re<0||V!==g[Re]?Ce(U,b,_e,2):Re--)}}},Ce=(h,m,b,$,A=null)=>{const{el:E,type:G,transition:H,children:L,shapeFlag:V}=h;if(V&6){Ce(h.component.subTree,m,b,$);return}if(V&128){h.suspense.move(m,b,$);return}if(V&64){G.move(h,m,b,z);return}if(G===Le){s(E,m,b);for(let q=0;q<L.length;q++)Ce(L[q],m,b,$);s(h.anchor,m,b);return}if(G===Ps){X(h,m,b);return}if($!==2&&V&1&&H)if($===0)H.beforeEnter(E),s(E,m,b),ct(()=>H.enter(E),A);else{const{leave:q,delayLeave:ie,afterLeave:pe}=H,$e=()=>{h.ctx.isUnmounted?r(E):s(E,m,b)},Ne=()=>{E._isLeaving&&E[Bl](!0),q(E,()=>{$e(),pe&&pe()})};ie?ie(E,$e,Ne):Ne()}else s(E,m,b)},xe=(h,m,b,$=!1,A=!1)=>{const{type:E,props:G,ref:H,children:L,dynamicChildren:V,shapeFlag:le,patchFlag:q,dirs:ie,cacheIndex:pe}=h;if(q===-2&&(A=!1),H!=null&&(Nt(),Mn(H,null,b,h,!0),Vt()),pe!=null&&(m.renderCache[pe]=void 0),le&256){m.ctx.deactivate(h);return}const $e=le&1&&ie,Ne=!En(h);let Re;if(Ne&&(Re=G&&G.onVnodeBeforeUnmount)&&wt(Re,m,h),le&6)P(h.component,b,$);else{if(le&128){h.suspense.unmount(b,$);return}$e&&Jt(h,null,m,"beforeUnmount"),le&64?h.type.remove(h,m,b,z,$):V&&!V.hasOnce&&(E!==Le||q>0&&q&64)?ee(V,m,b,!1,!0):(E===Le&&q&384||!A&&le&16)&&ee(L,m,b),$&&ge(h)}(Ne&&(Re=G&&G.onVnodeUnmounted)||$e)&&ct(()=>{Re&&wt(Re,m,h),$e&&Jt(h,null,m,"unmounted")},b)},ge=h=>{const{type:m,el:b,anchor:$,transition:A}=h;if(m===Le){O(b,$);return}if(m===Ps){w(h);return}const E=()=>{r(b),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(h.shapeFlag&1&&A&&!A.persisted){const{leave:G,delayLeave:H}=A,L=()=>G(b,E);H?H(h.el,E,L):L()}else E()},O=(h,m)=>{let b;for(;h!==m;)b=_(h),r(h),h=b;r(m)},P=(h,m,b)=>{const{bum:$,scope:A,job:E,subTree:G,um:H,m:L,a:V}=h;Hr(L),Hr(V),$&&Yn($),A.stop(),E&&(E.flags|=8,xe(G,h,m,b)),H&&ct(H,m),ct(()=>{h.isUnmounted=!0},m)},ee=(h,m,b,$=!1,A=!1,E=0)=>{for(let G=E;G<h.length;G++)xe(h[G],m,b,$,A)},k=h=>{if(h.shapeFlag&6)return k(h.component.subTree);if(h.shapeFlag&128)return h.suspense.next();const m=_(h.anchor||h.el),b=m&&m[Hl];return b?_(b):m};let F=!1;const D=(h,m,b)=>{h==null?m._vnode&&xe(m._vnode,null,null,!0):f(m._vnode||null,h,m,null,null,null,b),m._vnode=h,F||(F=!0,Ir(),ii(),F=!1)},z={p:f,um:xe,m:Ce,r:ge,mt:Z,mc:J,pc:W,pbc:oe,n:k,o:e};return{render:D,hydrate:void 0,createApp:da(D)}}function Rs({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Yt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wa(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function $i(e,t,n=!1){const s=e.children,r=t.children;if(ye(s)&&ye(r))for(let o=0;o<s.length;o++){const i=s[o];let l=r[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[o]=Kt(r[o]),l.el=i.el),!n&&l.patchFlag!==-2&&$i(i,l)),l.type===ws&&l.patchFlag!==-1&&(l.el=i.el),l.type===Wt&&!l.el&&(l.el=i.el)}}function Sa(e){const t=e.slice(),n=[0];let s,r,o,i,l;const a=e.length;for(s=0;s<a;s++){const c=e[s];if(c!==0){if(r=n[n.length-1],e[r]<c){t[s]=r,n.push(s);continue}for(o=0,i=n.length-1;o<i;)l=o+i>>1,e[n[l]]<c?o=l+1:i=l;c<e[n[o]]&&(o>0&&(t[s]=n[o-1]),n[o]=s)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=t[i];return n}function Mi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Mi(t)}function Hr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const xa=Symbol.for("v-scx"),ka=()=>yt(xa);function Mt(e,t,n){return Ei(e,t,n)}function Ei(e,t,n=Fe){const{immediate:s,deep:r,flush:o,once:i}=n,l=rt({},n),a=t&&s||!t&&o!=="post";let c;if(Vn){if(o==="sync"){const v=ka();c=v.__watcherHandles||(v.__watcherHandles=[])}else if(!a){const v=()=>{};return v.stop=$t,v.resume=$t,v.pause=$t,v}}const u=nt;l.call=(v,R,f)=>Ct(v,u,R,f);let p=!1;o==="post"?l.scheduler=v=>{ct(v,u&&u.suspense)}:o!=="sync"&&(p=!0,l.scheduler=(v,R)=>{R?v():_r(v)}),l.augmentJob=v=>{t&&(v.flags|=4),p&&(v.flags|=2,u&&(v.id=u.uid,v.i=u))};const _=jl(e,t,l);return Vn&&(c?c.push(_):a&&_()),_}function $a(e,t,n){const s=this.proxy,r=qe(e)?e.includes(".")?Ci(s,e):()=>s[e]:e.bind(s,s);let o;Se(t)?o=t:(o=t.handler,n=t);const i=Hn(this),l=Ei(r,o.bind(s),n);return i(),l}function Ci(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Ma=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${gt(t)}Modifiers`]||e[`${zt(t)}Modifiers`];function Ea(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Fe;let r=n;const o=t.startsWith("update:"),i=o&&Ma(s,t.slice(7));i&&(i.trim&&(r=n.map(u=>qe(u)?u.trim():u)),i.number&&(r=n.map(Bs)));let l,a=s[l=$s(t)]||s[l=$s(gt(t))];!a&&o&&(a=s[l=$s(zt(t))]),a&&Ct(a,e,6,r);const c=s[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ct(c,e,6,r)}}const Ca=new WeakMap;function Ai(e,t,n=!1){const s=n?Ca:t.emitsCache,r=s.get(e);if(r!==void 0)return r;const o=e.emits;let i={},l=!1;if(!Se(e)){const a=c=>{const u=Ai(c,t,!0);u&&(l=!0,rt(i,u))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!o&&!l?(je(e)&&s.set(e,null),null):(ye(o)?o.forEach(a=>i[a]=null):rt(i,o),je(e)&&s.set(e,i),i)}function bs(e,t){return!e||!ps(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ie(e,t[0].toLowerCase()+t.slice(1))||Ie(e,zt(t))||Ie(e,t))}function Ur(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[o],slots:i,attrs:l,emit:a,render:c,renderCache:u,props:p,data:_,setupState:v,ctx:R,inheritAttrs:f}=e,x=rs(e);let M,B;try{if(n.shapeFlag&4){const w=r||s,y=w;M=xt(c.call(y,w,u,p,v,_,R)),B=l}else{const w=t;M=xt(w.length>1?w(p,{attrs:l,slots:i,emit:a}):w(p,null)),B=t.props?l:Aa(l)}}catch(w){An.length=0,ys(w,e,1),M=We(Wt)}let X=M;if(B&&f!==!1){const w=Object.keys(B),{shapeFlag:y}=X;w.length&&y&7&&(o&&w.some(ur)&&(B=Ta(B,o)),X=pn(X,B,!1,!0))}return n.dirs&&(X=pn(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(n.dirs):n.dirs),n.transition&&br(X,n.transition),M=X,rs(x),M}const Aa=e=>{let t;for(const n in e)(n==="class"||n==="style"||ps(n))&&((t||(t={}))[n]=e[n]);return t},Ta=(e,t)=>{const n={};for(const s in e)(!ur(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Ra(e,t,n){const{props:s,children:r,component:o}=e,{props:i,children:l,patchFlag:a}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?Br(s,i,c):!!i;if(a&8){const u=t.dynamicProps;for(let p=0;p<u.length;p++){const _=u[p];if(i[_]!==s[_]&&!bs(c,_))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===i?!1:s?i?Br(s,i,c):!0:!!i;return!1}function Br(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const o=s[r];if(t[o]!==e[o]&&!bs(n,o))return!0}return!1}function Pa({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ti=e=>e.__isSuspense;function Oa(e,t){t&&t.pendingBranch?ye(e)?t.effects.push(...e):t.effects.push(e):Kl(e)}const Le=Symbol.for("v-fgt"),ws=Symbol.for("v-txt"),Wt=Symbol.for("v-cmt"),Ps=Symbol.for("v-stc"),An=[];let dt=null;function C(e=!1){An.push(dt=e?null:[])}function Ia(){An.pop(),dt=An[An.length-1]||null}let Nn=1;function as(e,t=!1){Nn+=e,e<0&&dt&&t&&(dt.hasOnce=!0)}function Ri(e){return e.dynamicChildren=Nn>0?dt||ln:null,Ia(),Nn>0&&dt&&dt.push(e),e}function T(e,t,n,s,r,o){return Ri(d(e,t,n,s,r,o,!0))}function xr(e,t,n,s,r){return Ri(We(e,t,n,s,r,!0))}function us(e){return e?e.__v_isVNode===!0:!1}function _n(e,t){return e.type===t.type&&e.key===t.key}const Pi=({key:e})=>e??null,Qn=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?qe(e)||st(e)||Se(e)?{i:ft,r:e,k:t,f:!!n}:e:null);function d(e,t=null,n=null,s=0,r=null,o=e===Le?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Pi(t),ref:t&&Qn(t),scopeId:ai,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ft};return l?(kr(a,n),o&128&&e.normalize(a)):n&&(a.shapeFlag|=qe(n)?8:16),Nn>0&&!i&&dt&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&dt.push(a),a}const We=Na;function Na(e,t=null,n=null,s=0,r=null,o=!1){if((!e||e===sa)&&(e=Wt),us(e)){const l=pn(e,t,!0);return n&&kr(l,n),Nn>0&&!o&&dt&&(l.shapeFlag&6?dt[dt.indexOf(e)]=l:dt.push(l)),l.patchFlag=-2,l}if(Ga(e)&&(e=e.__vccOpts),t){t=Va(t);let{class:l,style:a}=t;l&&!qe(l)&&(t.class=Ue(l)),je(a)&&(yr(a)&&!ye(a)&&(a=rt({},a)),t.style=et(a))}const i=qe(e)?1:Ti(e)?128:Ul(e)?64:je(e)?4:Se(e)?2:0;return d(e,t,n,s,r,i,o,!0)}function Va(e){return e?yr(e)||_i(e)?rt({},e):e:null}function pn(e,t,n=!1,s=!1){const{props:r,ref:o,patchFlag:i,children:l,transition:a}=e,c=t?Fa(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Pi(c),ref:t&&t.ref?n&&o?ye(o)?o.concat(Qn(t)):[o,Qn(t)]:Qn(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Le?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pn(e.ssContent),ssFallback:e.ssFallback&&pn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&s&&br(u,a.clone(u)),u}function kt(e=" ",t=0){return We(ws,null,e,t)}function Me(e="",t=!1){return t?(C(),xr(Wt,null,e)):We(Wt,null,e)}function xt(e){return e==null||typeof e=="boolean"?We(Wt):ye(e)?We(Le,null,e.slice()):us(e)?Kt(e):We(ws,null,String(e))}function Kt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:pn(e)}function kr(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ye(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),kr(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!_i(t)?t._ctx=ft:r===3&&ft&&(ft.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Se(t)?(t={default:t,_ctx:ft},n=32):(t=String(t),s&64?(n=16,t=[kt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Fa(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=Ue([t.class,s.class]));else if(r==="style")t.style=et([t.style,s.style]);else if(ps(r)){const o=t[r],i=s[r];i&&o!==i&&!(ye(o)&&o.includes(i))&&(t[r]=o?[].concat(o,i):i)}else r!==""&&(t[r]=s[r])}return t}function wt(e,t,n,s=null){Ct(e,t,7,[n,s])}const ja=gi();let Da=0;function La(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||ja,o={uid:Da++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wi(s,r),emitsOptions:Ai(s,r),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:s.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Ea.bind(null,o),e.ce&&e.ce(o),o}let nt=null;const Ka=()=>nt||ft;let cs,nr;{const e=gs(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),o=>{r.length>1?r.forEach(i=>i(o)):r[0](o)}};cs=t("__VUE_INSTANCE_SETTERS__",n=>nt=n),nr=t("__VUE_SSR_SETTERS__",n=>Vn=n)}const Hn=e=>{const t=nt;return cs(e),e.scope.on(),()=>{e.scope.off(),cs(t)}},Wr=()=>{nt&&nt.scope.off(),cs(null)};function Oi(e){return e.vnode.shapeFlag&4}let Vn=!1;function Ha(e,t=!1,n=!1){t&&nr(t);const{props:s,children:r}=e.vnode,o=Oi(e);pa(e,s,o,t),va(e,r,n||t);const i=o?Ua(e,t):void 0;return t&&nr(!1),i}function Ua(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,oa);const{setup:s}=n;if(s){Nt();const r=e.setupContext=s.length>1?Wa(e):null,o=Hn(e),i=Ln(s,e,0,[e.props,r]),l=Oo(i);if(Vt(),o(),(l||e.sp)&&!En(e)&&ci(e),l){if(i.then(Wr,Wr),t)return i.then(a=>{zr(e,a)}).catch(a=>{ys(a,e,0)});e.asyncDep=i}else zr(e,i)}else Ii(e)}function zr(e,t,n){Se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:je(t)&&(e.setupState=ni(t)),Ii(e)}function Ii(e,t,n){const s=e.type;e.render||(e.render=s.render||$t);{const r=Hn(e);Nt();try{ia(e)}finally{Vt(),r()}}}const Ba={get(e,t){return tt(e,"get",""),e[t]}};function Wa(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Ba),slots:e.slots,emit:e.emit,expose:t}}function Ss(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ni(Rl(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Cn)return Cn[n](e)},has(t,n){return n in t||n in Cn}})):e.proxy}function za(e,t=!0){return Se(e)?e.displayName||e.name:e.name||t&&e.__name}function Ga(e){return Se(e)&&"__vccOpts"in e}const te=(e,t)=>Vl(e,t,Vn);function Ni(e,t,n){try{as(-1);const s=arguments.length;return s===2?je(t)&&!ye(t)?us(t)?We(e,null,[t]):We(e,t):We(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&us(n)&&(n=[n]),We(e,t,n))}finally{as(1)}}const qa="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sr;const Gr=typeof window<"u"&&window.trustedTypes;if(Gr)try{sr=Gr.createPolicy("vue",{createHTML:e=>e})}catch{}const Vi=sr?e=>sr.createHTML(e):e=>e,Ja="http://www.w3.org/2000/svg",Ya="http://www.w3.org/1998/Math/MathML",Rt=typeof document<"u"?document:null,qr=Rt&&Rt.createElement("template"),Xa={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?Rt.createElementNS(Ja,e):t==="mathml"?Rt.createElementNS(Ya,e):n?Rt.createElement(e,{is:n}):Rt.createElement(e);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Rt.createTextNode(e),createComment:e=>Rt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Rt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,o){const i=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{qr.innerHTML=Vi(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=qr.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Qa=Symbol("_vtc");function Za(e,t,n){const s=e[Qa];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const fs=Symbol("_vod"),Fi=Symbol("_vsh"),eu={name:"show",beforeMount(e,{value:t},{transition:n}){e[fs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):bn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),bn(e,!0),s.enter(e)):s.leave(e,()=>{bn(e,!1)}):bn(e,t))},beforeUnmount(e,{value:t}){bn(e,t)}};function bn(e,t){e.style.display=t?e[fs]:"none",e[Fi]=!t}const tu=Symbol(""),nu=/(?:^|;)\s*display\s*:/;function su(e,t,n){const s=e.style,r=qe(n);let o=!1;if(n&&!r){if(t)if(qe(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&Zn(s,l,"")}else for(const i in t)n[i]==null&&Zn(s,i,"");for(const i in n)i==="display"&&(o=!0),Zn(s,i,n[i])}else if(r){if(t!==n){const i=s[tu];i&&(n+=";"+i),s.cssText=n,o=nu.test(n)}}else t&&e.removeAttribute("style");fs in e&&(e[fs]=o?s.display:"",e[Fi]&&(s.display="none"))}const Jr=/\s*!important$/;function Zn(e,t,n){if(ye(n))n.forEach(s=>Zn(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ru(e,t);Jr.test(n)?e.setProperty(zt(s),n.replace(Jr,""),"important"):e[s]=n}}const Yr=["Webkit","Moz","ms"],Os={};function ru(e,t){const n=Os[t];if(n)return n;let s=gt(t);if(s!=="filter"&&s in e)return Os[t]=s;s=ms(s);for(let r=0;r<Yr.length;r++){const o=Yr[r]+s;if(o in e)return Os[t]=o}return t}const Xr="http://www.w3.org/1999/xlink";function Qr(e,t,n,s,r,o=ul(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Xr,t.slice(6,t.length)):e.setAttributeNS(Xr,t,n):n==null||o&&!Fo(n)?e.removeAttribute(t):e.setAttribute(t,o?"":Et(n)?String(n):n)}function Zr(e,t,n,s,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Vi(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Fo(n):n==null&&l==="string"?(n="",i=!0):l==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(r||t)}function Qt(e,t,n,s){e.addEventListener(t,n,s)}function ou(e,t,n,s){e.removeEventListener(t,n,s)}const eo=Symbol("_vei");function iu(e,t,n,s,r=null){const o=e[eo]||(e[eo]={}),i=o[t];if(s&&i)i.value=s;else{const[l,a]=lu(t);if(s){const c=o[t]=cu(s,r);Qt(e,l,c,a)}else i&&(ou(e,l,i,a),o[t]=void 0)}}const to=/(?:Once|Passive|Capture)$/;function lu(e){let t;if(to.test(e)){t={};let s;for(;s=e.match(to);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):zt(e.slice(2)),t]}let Is=0;const au=Promise.resolve(),uu=()=>Is||(au.then(()=>Is=0),Is=Date.now());function cu(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ct(fu(s,n.value),t,5,[s])};return n.value=e,n.attached=uu(),n}function fu(e,t){if(ye(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const no=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,du=(e,t,n,s,r,o)=>{const i=r==="svg";t==="class"?Za(e,s,i):t==="style"?su(e,n,s):ps(t)?ur(t)||iu(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pu(e,t,s,i))?(Zr(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Qr(e,t,s,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!qe(s))?Zr(e,gt(t),s,o,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Qr(e,t,s,i))};function pu(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&no(t)&&Se(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return no(t)&&qe(n)?!1:t in e}const ds=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ye(t)?n=>Yn(t,n):t};function hu(e){e.target.composing=!0}function so(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const dn=Symbol("_assign"),mu={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[dn]=ds(r);const o=s||r.props&&r.props.type==="number";Qt(e,t?"change":"input",i=>{if(i.target.composing)return;let l=e.value;n&&(l=l.trim()),o&&(l=Bs(l)),e[dn](l)}),n&&Qt(e,"change",()=>{e.value=e.value.trim()}),t||(Qt(e,"compositionstart",hu),Qt(e,"compositionend",so),Qt(e,"change",so))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:r,number:o}},i){if(e[dn]=ds(i),e.composing)return;const l=(o||e.type==="number")&&!/^0\d/.test(e.value)?Bs(e.value):e.value,a=t??"";l!==a&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||r&&e.value.trim()===a)||(e.value=a))}},gu={created(e,{value:t},n){e.checked=es(t,n.props.value),e[dn]=ds(n),Qt(e,"change",()=>{e[dn](vu(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[dn]=ds(s),t!==n&&(e.checked=es(t,s.props.value))}};function vu(e){return"_value"in e?e._value:e.value}const yu=["ctrl","shift","alt","meta"],_u={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>yu.some(n=>e[`${n}Key`]&&!t.includes(n))},bu=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((r,...o)=>{for(let i=0;i<t.length;i++){const l=_u[t[i]];if(l&&l(r,t))return}return e(r,...o)}))},wu={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Su=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=(r=>{if(!("key"in r))return;const o=zt(r.key);if(t.some(i=>i===o||wu[i]===o))return e(r)}))},xu=rt({patchProp:du},Xa);let ro;function ku(){return ro||(ro=_a(xu))}const $u=((...e)=>{const t=ku().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=Eu(s);if(!r)return;const o=t._component;!Se(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=n(r,!1,Mu(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t});function Mu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Eu(e){return qe(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const on=typeof document<"u";function ji(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Cu(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ji(e.default)}const Pe=Object.assign;function Ns(e,t){const n={};for(const s in t){const r=t[s];n[s]=_t(r)?r.map(e):e(r)}return n}const Tn=()=>{},_t=Array.isArray,Di=/#/g,Au=/&/g,Tu=/\//g,Ru=/=/g,Pu=/\?/g,Li=/\+/g,Ou=/%5B/g,Iu=/%5D/g,Ki=/%5E/g,Nu=/%60/g,Hi=/%7B/g,Vu=/%7C/g,Ui=/%7D/g,Fu=/%20/g;function $r(e){return encodeURI(""+e).replace(Vu,"|").replace(Ou,"[").replace(Iu,"]")}function ju(e){return $r(e).replace(Hi,"{").replace(Ui,"}").replace(Ki,"^")}function rr(e){return $r(e).replace(Li,"%2B").replace(Fu,"+").replace(Di,"%23").replace(Au,"%26").replace(Nu,"`").replace(Hi,"{").replace(Ui,"}").replace(Ki,"^")}function Du(e){return rr(e).replace(Ru,"%3D")}function Lu(e){return $r(e).replace(Di,"%23").replace(Pu,"%3F")}function Ku(e){return e==null?"":Lu(e).replace(Tu,"%2F")}function Fn(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Hu=/\/$/,Uu=e=>e.replace(Hu,"");function Vs(e,t,n="/"){let s,r={},o="",i="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(s=t.slice(0,a),o=t.slice(a+1,l>-1?l:t.length),r=e(o)),l>-1&&(s=s||t.slice(0,l),i=t.slice(l,t.length)),s=Gu(s??t,n),{fullPath:s+(o&&"?")+o+i,path:s,query:r,hash:Fn(i)}}function Bu(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function oo(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Wu(e,t,n){const s=t.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&hn(t.matched[s],n.matched[r])&&Bi(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function hn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Bi(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!zu(e[n],t[n]))return!1;return!0}function zu(e,t){return _t(e)?io(e,t):_t(t)?io(t,e):e===t}function io(e,t){return _t(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Gu(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let o=n.length-1,i,l;for(i=0;i<s.length;i++)if(l=s[i],l!==".")if(l==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(i).join("/")}const Dt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var jn;(function(e){e.pop="pop",e.push="push"})(jn||(jn={}));var Rn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Rn||(Rn={}));function qu(e){if(!e)if(on){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Uu(e)}const Ju=/^[^#]+#/;function Yu(e,t){return e.replace(Ju,"#")+t}function Xu(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const xs=()=>({left:window.scrollX,top:window.scrollY});function Qu(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=Xu(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function lo(e,t){return(history.state?history.state.position-t:-1)+e}const or=new Map;function Zu(e,t){or.set(e,t)}function ec(e){const t=or.get(e);return or.delete(e),t}let tc=()=>location.protocol+"//"+location.host;function Wi(e,t){const{pathname:n,search:s,hash:r}=t,o=e.indexOf("#");if(o>-1){let l=r.includes(e.slice(o))?e.slice(o).length:1,a=r.slice(l);return a[0]!=="/"&&(a="/"+a),oo(a,"")}return oo(n,e)+s+r}function nc(e,t,n,s){let r=[],o=[],i=null;const l=({state:_})=>{const v=Wi(e,location),R=n.value,f=t.value;let x=0;if(_){if(n.value=v,t.value=_,i&&i===R){i=null;return}x=f?_.position-f.position:0}else s(v);r.forEach(M=>{M(n.value,R,{delta:x,type:jn.pop,direction:x?x>0?Rn.forward:Rn.back:Rn.unknown})})};function a(){i=n.value}function c(_){r.push(_);const v=()=>{const R=r.indexOf(_);R>-1&&r.splice(R,1)};return o.push(v),v}function u(){const{history:_}=window;_.state&&_.replaceState(Pe({},_.state,{scroll:xs()}),"")}function p(){for(const _ of o)_();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:a,listen:c,destroy:p}}function ao(e,t,n,s=!1,r=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:r?xs():null}}function sc(e){const{history:t,location:n}=window,s={value:Wi(e,n)},r={value:t.state};r.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(a,c,u){const p=e.indexOf("#"),_=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+a:tc()+e+a;try{t[u?"replaceState":"pushState"](c,"",_),r.value=c}catch(v){console.error(v),n[u?"replace":"assign"](_)}}function i(a,c){const u=Pe({},t.state,ao(r.value.back,a,r.value.forward,!0),c,{position:r.value.position});o(a,u,!0),s.value=a}function l(a,c){const u=Pe({},r.value,t.state,{forward:a,scroll:xs()});o(u.current,u,!0);const p=Pe({},ao(s.value,a,null),{position:u.position+1},c);o(a,p,!1),s.value=a}return{location:s,state:r,push:l,replace:i}}function rc(e){e=qu(e);const t=sc(e),n=nc(e,t.state,t.location,t.replace);function s(o,i=!0){i||n.pauseListeners(),history.go(o)}const r=Pe({location:"",base:e,go:s,createHref:Yu.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function oc(e){return typeof e=="string"||e&&typeof e=="object"}function zi(e){return typeof e=="string"||typeof e=="symbol"}const Gi=Symbol("");var uo;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(uo||(uo={}));function mn(e,t){return Pe(new Error,{type:e,[Gi]:!0},t)}function Tt(e,t){return e instanceof Error&&Gi in e&&(t==null||!!(e.type&t))}const co="[^/]+?",ic={sensitive:!1,strict:!1,start:!0,end:!0},lc=/[.+*?^${}()[\]/\\]/g;function ac(e,t){const n=Pe({},ic,t),s=[];let r=n.start?"^":"";const o=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let p=0;p<c.length;p++){const _=c[p];let v=40+(n.sensitive?.25:0);if(_.type===0)p||(r+="/"),r+=_.value.replace(lc,"\\$&"),v+=40;else if(_.type===1){const{value:R,repeatable:f,optional:x,regexp:M}=_;o.push({name:R,repeatable:f,optional:x});const B=M||co;if(B!==co){v+=10;try{new RegExp(`(${B})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${R}" (${B}): `+w.message)}}let X=f?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(X=x&&c.length<2?`(?:/${X})`:"/"+X),x&&(X+="?"),r+=X,v+=20,x&&(v+=-8),f&&(v+=-20),B===".*"&&(v+=-50)}u.push(v)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=new RegExp(r,n.sensitive?"":"i");function l(c){const u=c.match(i),p={};if(!u)return null;for(let _=1;_<u.length;_++){const v=u[_]||"",R=o[_-1];p[R.name]=v&&R.repeatable?v.split("/"):v}return p}function a(c){let u="",p=!1;for(const _ of e){(!p||!u.endsWith("/"))&&(u+="/"),p=!1;for(const v of _)if(v.type===0)u+=v.value;else if(v.type===1){const{value:R,repeatable:f,optional:x}=v,M=R in c?c[R]:"";if(_t(M)&&!f)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const B=_t(M)?M.join("/"):M;if(!B)if(x)_.length<2&&(u.endsWith("/")?u=u.slice(0,-1):p=!0);else throw new Error(`Missing required param "${R}"`);u+=B}}return u||"/"}return{re:i,score:s,keys:o,parse:l,stringify:a}}function uc(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function qi(e,t){let n=0;const s=e.score,r=t.score;for(;n<s.length&&n<r.length;){const o=uc(s[n],r[n]);if(o)return o;n++}if(Math.abs(r.length-s.length)===1){if(fo(s))return 1;if(fo(r))return-1}return r.length-s.length}function fo(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const cc={type:0,value:""},fc=/[a-zA-Z0-9_]/;function dc(e){if(!e)return[[]];if(e==="/")return[[cc]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${n})/"${c}": ${v}`)}let n=0,s=n;const r=[];let o;function i(){o&&r.push(o),o=[]}let l=0,a,c="",u="";function p(){c&&(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),c="")}function _(){c+=a}for(;l<e.length;){if(a=e[l++],a==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:a==="/"?(c&&p(),i()):a===":"?(p(),n=1):_();break;case 4:_(),n=s;break;case 1:a==="("?n=2:fc.test(a)?_():(p(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:p(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),p(),i(),r}function pc(e,t,n){const s=ac(dc(e.path),n),r=Pe(s,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function hc(e,t){const n=[],s=new Map;t=go({strict:!1,end:!0,sensitive:!1},t);function r(p){return s.get(p)}function o(p,_,v){const R=!v,f=ho(p);f.aliasOf=v&&v.record;const x=go(t,p),M=[f];if("alias"in p){const w=typeof p.alias=="string"?[p.alias]:p.alias;for(const y of w)M.push(ho(Pe({},f,{components:v?v.record.components:f.components,path:y,aliasOf:v?v.record:f})))}let B,X;for(const w of M){const{path:y}=w;if(_&&y[0]!=="/"){const I=_.record.path,se=I[I.length-1]==="/"?"":"/";w.path=_.record.path+(y&&se+y)}if(B=pc(w,_,x),v?v.alias.push(B):(X=X||B,X!==B&&X.alias.push(B),R&&p.name&&!mo(B)&&i(p.name)),Ji(B)&&a(B),f.children){const I=f.children;for(let se=0;se<I.length;se++)o(I[se],B,v&&v.children[se])}v=v||B}return X?()=>{i(X)}:Tn}function i(p){if(zi(p)){const _=s.get(p);_&&(s.delete(p),n.splice(n.indexOf(_),1),_.children.forEach(i),_.alias.forEach(i))}else{const _=n.indexOf(p);_>-1&&(n.splice(_,1),p.record.name&&s.delete(p.record.name),p.children.forEach(i),p.alias.forEach(i))}}function l(){return n}function a(p){const _=vc(p,n);n.splice(_,0,p),p.record.name&&!mo(p)&&s.set(p.record.name,p)}function c(p,_){let v,R={},f,x;if("name"in p&&p.name){if(v=s.get(p.name),!v)throw mn(1,{location:p});x=v.record.name,R=Pe(po(_.params,v.keys.filter(X=>!X.optional).concat(v.parent?v.parent.keys.filter(X=>X.optional):[]).map(X=>X.name)),p.params&&po(p.params,v.keys.map(X=>X.name))),f=v.stringify(R)}else if(p.path!=null)f=p.path,v=n.find(X=>X.re.test(f)),v&&(R=v.parse(f),x=v.record.name);else{if(v=_.name?s.get(_.name):n.find(X=>X.re.test(_.path)),!v)throw mn(1,{location:p,currentLocation:_});x=v.record.name,R=Pe({},_.params,p.params),f=v.stringify(R)}const M=[];let B=v;for(;B;)M.unshift(B.record),B=B.parent;return{name:x,path:f,params:R,matched:M,meta:gc(M)}}e.forEach(p=>o(p));function u(){n.length=0,s.clear()}return{addRoute:o,resolve:c,removeRoute:i,clearRoutes:u,getRoutes:l,getRecordMatcher:r}}function po(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ho(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:mc(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function mc(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function mo(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function gc(e){return e.reduce((t,n)=>Pe(t,n.meta),{})}function go(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function vc(e,t){let n=0,s=t.length;for(;n!==s;){const o=n+s>>1;qi(e,t[o])<0?s=o:n=o+1}const r=yc(e);return r&&(s=t.lastIndexOf(r,s-1)),s}function yc(e){let t=e;for(;t=t.parent;)if(Ji(t)&&qi(e,t)===0)return t}function Ji({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function _c(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const o=s[r].replace(Li," "),i=o.indexOf("="),l=Fn(i<0?o:o.slice(0,i)),a=i<0?null:Fn(o.slice(i+1));if(l in t){let c=t[l];_t(c)||(c=t[l]=[c]),c.push(a)}else t[l]=a}return t}function vo(e){let t="";for(let n in e){const s=e[n];if(n=Du(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(_t(s)?s.map(o=>o&&rr(o)):[s&&rr(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function bc(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=_t(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return t}const wc=Symbol(""),yo=Symbol(""),ks=Symbol(""),Mr=Symbol(""),ir=Symbol("");function wn(){let e=[];function t(s){return e.push(s),()=>{const r=e.indexOf(s);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ht(e,t,n,s,r,o=i=>i()){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,a)=>{const c=_=>{_===!1?a(mn(4,{from:n,to:t})):_ instanceof Error?a(_):oc(_)?a(mn(2,{from:t,to:_})):(i&&s.enterCallbacks[r]===i&&typeof _=="function"&&i.push(_),l())},u=o(()=>e.call(s&&s.instances[r],t,n,c));let p=Promise.resolve(u);e.length<3&&(p=p.then(c)),p.catch(_=>a(_))})}function Fs(e,t,n,s,r=o=>o()){const o=[];for(const i of e)for(const l in i.components){let a=i.components[l];if(!(t!=="beforeRouteEnter"&&!i.instances[l]))if(ji(a)){const u=(a.__vccOpts||a)[t];u&&o.push(Ht(u,n,s,i,l,r))}else{let c=a();o.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${i.path}"`);const p=Cu(u)?u.default:u;i.mods[l]=u,i.components[l]=p;const v=(p.__vccOpts||p)[t];return v&&Ht(v,n,s,i,l,r)()}))}}return o}function _o(e){const t=yt(ks),n=yt(Mr),s=te(()=>{const a=It(e.to);return t.resolve(a)}),r=te(()=>{const{matched:a}=s.value,{length:c}=a,u=a[c-1],p=n.matched;if(!u||!p.length)return-1;const _=p.findIndex(hn.bind(null,u));if(_>-1)return _;const v=bo(a[c-2]);return c>1&&bo(u)===v&&p[p.length-1].path!==v?p.findIndex(hn.bind(null,a[c-2])):_}),o=te(()=>r.value>-1&&Mc(n.params,s.value.params)),i=te(()=>r.value>-1&&r.value===n.matched.length-1&&Bi(n.params,s.value.params));function l(a={}){if($c(a)){const c=t[It(e.replace)?"replace":"push"](It(e.to)).catch(Tn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:te(()=>s.value.href),isActive:o,isExactActive:i,navigate:l}}function Sc(e){return e.length===1?e[0]:e}const xc=ui({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:_o,setup(e,{slots:t}){const n=tn(_o(e)),{options:s}=yt(ks),r=te(()=>({[wo(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[wo(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&Sc(t.default(n));return e.custom?o:Ni("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},o)}}}),kc=xc;function $c(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Mc(e,t){for(const n in t){const s=t[n],r=e[n];if(typeof s=="string"){if(s!==r)return!1}else if(!_t(r)||r.length!==s.length||s.some((o,i)=>o!==r[i]))return!1}return!0}function bo(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const wo=(e,t,n)=>e??t??n,Ec=ui({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=yt(ir),r=te(()=>e.route||s.value),o=yt(yo,0),i=te(()=>{let c=It(o);const{matched:u}=r.value;let p;for(;(p=u[c])&&!p.components;)c++;return c}),l=te(()=>r.value.matched[i.value]);Xn(yo,te(()=>i.value+1)),Xn(wc,l),Xn(ir,r);const a=Ee();return Mt(()=>[a.value,l.value,e.name],([c,u,p],[_,v,R])=>{u&&(u.instances[p]=c,v&&v!==u&&c&&c===_&&(u.leaveGuards.size||(u.leaveGuards=v.leaveGuards),u.updateGuards.size||(u.updateGuards=v.updateGuards))),c&&u&&(!v||!hn(u,v)||!_)&&(u.enterCallbacks[p]||[]).forEach(f=>f(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,p=l.value,_=p&&p.components[u];if(!_)return So(n.default,{Component:_,route:c});const v=p.props[u],R=v?v===!0?c.params:typeof v=="function"?v(c):v:null,x=Ni(_,Pe({},R,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(p.instances[u]=null)},ref:a}));return So(n.default,{Component:x,route:c})||x}}});function So(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Cc=Ec;function Ac(e){const t=hc(e.routes,e),n=e.parseQuery||_c,s=e.stringifyQuery||vo,r=e.history,o=wn(),i=wn(),l=wn(),a=Pl(Dt);let c=Dt;on&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ns.bind(null,k=>""+k),p=Ns.bind(null,Ku),_=Ns.bind(null,Fn);function v(k,F){let D,z;return zi(k)?(D=t.getRecordMatcher(k),z=F):z=k,t.addRoute(z,D)}function R(k){const F=t.getRecordMatcher(k);F&&t.removeRoute(F)}function f(){return t.getRoutes().map(k=>k.record)}function x(k){return!!t.getRecordMatcher(k)}function M(k,F){if(F=Pe({},F||a.value),typeof k=="string"){const b=Vs(n,k,F.path),$=t.resolve({path:b.path},F),A=r.createHref(b.fullPath);return Pe(b,$,{params:_($.params),hash:Fn(b.hash),redirectedFrom:void 0,href:A})}let D;if(k.path!=null)D=Pe({},k,{path:Vs(n,k.path,F.path).path});else{const b=Pe({},k.params);for(const $ in b)b[$]==null&&delete b[$];D=Pe({},k,{params:p(b)}),F.params=p(F.params)}const z=t.resolve(D,F),ne=k.hash||"";z.params=u(_(z.params));const h=Bu(s,Pe({},k,{hash:ju(ne),path:z.path})),m=r.createHref(h);return Pe({fullPath:h,hash:ne,query:s===vo?bc(k.query):k.query||{}},z,{redirectedFrom:void 0,href:m})}function B(k){return typeof k=="string"?Vs(n,k,a.value.path):Pe({},k)}function X(k,F){if(c!==k)return mn(8,{from:F,to:k})}function w(k){return se(k)}function y(k){return w(Pe(B(k),{replace:!0}))}function I(k){const F=k.matched[k.matched.length-1];if(F&&F.redirect){const{redirect:D}=F;let z=typeof D=="function"?D(k):D;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=B(z):{path:z},z.params={}),Pe({query:k.query,hash:k.hash,params:z.path!=null?{}:k.params},z)}}function se(k,F){const D=c=M(k),z=a.value,ne=k.state,h=k.force,m=k.replace===!0,b=I(D);if(b)return se(Pe(B(b),{state:typeof b=="object"?Pe({},ne,b.state):ne,force:h,replace:m}),F||D);const $=D;$.redirectedFrom=F;let A;return!h&&Wu(s,z,D)&&(A=mn(16,{to:$,from:z}),Ce(z,z,!0,!1)),(A?Promise.resolve(A):oe($,z)).catch(E=>Tt(E)?Tt(E,2)?E:fe(E):W(E,$,z)).then(E=>{if(E){if(Tt(E,2))return se(Pe({replace:m},B(E.to),{state:typeof E.to=="object"?Pe({},ne,E.to.state):ne,force:h}),F||$)}else E=ce($,z,!0,m,ne);return re($,z,E),E})}function J(k,F){const D=X(k,F);return D?Promise.reject(D):Promise.resolve()}function Y(k){const F=O.values().next().value;return F&&typeof F.runWithContext=="function"?F.runWithContext(k):k()}function oe(k,F){let D;const[z,ne,h]=Tc(k,F);D=Fs(z.reverse(),"beforeRouteLeave",k,F);for(const b of z)b.leaveGuards.forEach($=>{D.push(Ht($,k,F))});const m=J.bind(null,k,F);return D.push(m),ee(D).then(()=>{D=[];for(const b of o.list())D.push(Ht(b,k,F));return D.push(m),ee(D)}).then(()=>{D=Fs(ne,"beforeRouteUpdate",k,F);for(const b of ne)b.updateGuards.forEach($=>{D.push(Ht($,k,F))});return D.push(m),ee(D)}).then(()=>{D=[];for(const b of h)if(b.beforeEnter)if(_t(b.beforeEnter))for(const $ of b.beforeEnter)D.push(Ht($,k,F));else D.push(Ht(b.beforeEnter,k,F));return D.push(m),ee(D)}).then(()=>(k.matched.forEach(b=>b.enterCallbacks={}),D=Fs(h,"beforeRouteEnter",k,F,Y),D.push(m),ee(D))).then(()=>{D=[];for(const b of i.list())D.push(Ht(b,k,F));return D.push(m),ee(D)}).catch(b=>Tt(b,8)?b:Promise.reject(b))}function re(k,F,D){l.list().forEach(z=>Y(()=>z(k,F,D)))}function ce(k,F,D,z,ne){const h=X(k,F);if(h)return h;const m=F===Dt,b=on?history.state:{};D&&(z||m?r.replace(k.fullPath,Pe({scroll:m&&b&&b.scroll},ne)):r.push(k.fullPath,ne)),a.value=k,Ce(k,F,D,m),fe()}let N;function Z(){N||(N=r.listen((k,F,D)=>{if(!P.listening)return;const z=M(k),ne=I(z);if(ne){se(Pe(ne,{replace:!0,force:!0}),z).catch(Tn);return}c=z;const h=a.value;on&&Zu(lo(h.fullPath,D.delta),xs()),oe(z,h).catch(m=>Tt(m,12)?m:Tt(m,2)?(se(Pe(B(m.to),{force:!0}),z).then(b=>{Tt(b,20)&&!D.delta&&D.type===jn.pop&&r.go(-1,!1)}).catch(Tn),Promise.reject()):(D.delta&&r.go(-D.delta,!1),W(m,z,h))).then(m=>{m=m||ce(z,h,!1),m&&(D.delta&&!Tt(m,8)?r.go(-D.delta,!1):D.type===jn.pop&&Tt(m,20)&&r.go(-1,!1)),re(z,h,m)}).catch(Tn)}))}let me=wn(),j=wn(),K;function W(k,F,D){fe(k);const z=j.list();return z.length?z.forEach(ne=>ne(k,F,D)):console.error(k),Promise.reject(k)}function be(){return K&&a.value!==Dt?Promise.resolve():new Promise((k,F)=>{me.add([k,F])})}function fe(k){return K||(K=!k,Z(),me.list().forEach(([F,D])=>k?D(k):F()),me.reset()),k}function Ce(k,F,D,z){const{scrollBehavior:ne}=e;if(!on||!ne)return Promise.resolve();const h=!D&&ec(lo(k.fullPath,0))||(z||!D)&&history.state&&history.state.scroll||null;return ri().then(()=>ne(k,F,h)).then(m=>m&&Qu(m)).catch(m=>W(m,k,F))}const xe=k=>r.go(k);let ge;const O=new Set,P={currentRoute:a,listening:!0,addRoute:v,removeRoute:R,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:f,resolve:M,options:e,push:w,replace:y,go:xe,back:()=>xe(-1),forward:()=>xe(1),beforeEach:o.add,beforeResolve:i.add,afterEach:l.add,onError:j.add,isReady:be,install(k){const F=this;k.component("RouterLink",kc),k.component("RouterView",Cc),k.config.globalProperties.$router=F,Object.defineProperty(k.config.globalProperties,"$route",{enumerable:!0,get:()=>It(a)}),on&&!ge&&a.value===Dt&&(ge=!0,w(r.location).catch(ne=>{}));const D={};for(const ne in Dt)Object.defineProperty(D,ne,{get:()=>a.value[ne],enumerable:!0});k.provide(ks,F),k.provide(Mr,ei(D)),k.provide(ir,a);const z=k.unmount;O.add(k),k.unmount=function(){O.delete(k),O.size<1&&(c=Dt,N&&N(),N=null,a.value=Dt,ge=!1,K=!1),z()}}};function ee(k){return k.reduce((F,D)=>F.then(()=>Y(D)),Promise.resolve())}return P}function Tc(e,t){const n=[],s=[],r=[],o=Math.max(t.matched.length,e.matched.length);for(let i=0;i<o;i++){const l=t.matched[i];l&&(e.matched.find(c=>hn(c,l))?s.push(l):n.push(l));const a=e.matched[i];a&&(t.matched.find(c=>hn(c,a))||r.push(a))}return[n,s,r]}function Yi(){return yt(ks)}function Rc(e){return yt(Mr)}const bt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},Pc={},Oc={class:"app-shell"},Ic={class:"app-header"};function Nc(e,t){const n=Xs("RouterLink"),s=Xs("router-view");return C(),T("div",Oc,[d("header",Ic,[t[2]||(t[2]=d("h1",null,"Smart Home",-1)),d("nav",null,[We(n,{to:"/",class:"nav-link","exact-active-class":"active"},{default:os(()=>[...t[0]||(t[0]=[kt("Главная",-1)])]),_:1}),We(n,{to:"/scenarios",class:"nav-link","active-class":"active"},{default:os(()=>[...t[1]||(t[1]=[kt("Сценарии",-1)])]),_:1})])]),We(s)])}const Vc=bt(Pc,[["render",Nc],["__scopeId","data-v-1e9f60ce"]]);let qn=null;async function Er(){return qn||(qn=await(await fetch("/config.json")).json(),qn)}async function Fc(e,t="UI"){const n=await Er(),s={"Content-Type":"application/json"};n.keyHeader&&n.keyValue&&(s[n.keyHeader]=n.keyValue);const r=JSON.stringify({device:t,status:e,ts:new Date().toISOString()}),o=await fetch(n.presUrl,{method:"POST",headers:s,body:r});return{status:o.status,text:await o.text()}}async function jc(e=""){const t=await Er(),n={};t.keyHeader&&t.keyValue&&(n[t.keyHeader]=t.keyValue);const s=await fetch(t.autoUrl+e,{headers:n});return{status:s.status,text:await s.text()}}const Dc={class:"card compact"},Lc={class:"row"},Kc={class:"emoji","aria-hidden":"true"},Hc={class:"main"},Uc={class:"title-row"},Bc={class:"title"},Wc={key:0,class:"room-tag"},zc={key:0,class:"side-control"},Gc=["disabled"],qc={class:"label"},Jc={class:"status-text"},Yc={__name:"DeviceCard",props:{device:{type:Object,required:!0},roomsById:{type:Object,default:()=>({})},entityType:{type:String,default:"device"}},setup(e){const t=e,n=te(()=>t.entityType||t.device?.entityType||"device"),s=te(()=>n.value==="group"),r=te(()=>s.value?"Группа":t.roomsById[t.device.room]?.name||"—"),o=te(()=>{if(s.value)return"👥";const N=t.device?.type||"";return N?N.includes("light")?"💡":N.includes("speaker")||N.includes("media_device")?"🔊":N.includes("sensor")?"📟":N.includes("switch")?"🔌":N.includes("humidifier")?"💧":"📦":"❓"}),i=N=>N?typeof N=="string"?N:N.type||"":"",l={battery_level:"Battery",brightness:"Brightness",co2:"CO2",color_temperature:"Color Temp",humidity:"Humidity",illumination:"Illumination",motion:"Motion",pm10:"PM10",pm2_5:"PM2.5",pressure:"Pressure",temperature:"Temperature",temperature_k:"Color Temp",voltage:"Voltage",volume:"Volume",water_level:"Water Level"},a=N=>N?N.split("_").map(Z=>Z.charAt(0).toUpperCase()+Z.slice(1)).join(" "):"",c=N=>N?l[N]||a(N):"",u=N=>(N||"").replace(/^unit[._]/,"").toLowerCase(),p=N=>Math.max(0,Math.min(255,Math.round(N??0))),_=(N,Z,me)=>{const j=K=>p(K).toString(16).padStart(2,"0").toUpperCase();return`#${j(N)}${j(Z)}${j(me)}`},v=(N,Z,me)=>{if(typeof N!="number"||typeof Z!="number"||typeof me!="number")return"";const j=(N%360+360)%360,K=Z>1?Z/100:Z,W=me>1?me/100:me,be=W*K,fe=be*(1-Math.abs(j/60%2-1)),Ce=W-be;let xe=0,ge=0,O=0;j<60?(xe=be,ge=fe,O=0):j<120?(xe=fe,ge=be,O=0):j<180?(xe=0,ge=be,O=fe):j<240?(xe=0,ge=fe,O=be):j<300?(xe=fe,ge=0,O=be):(xe=be,ge=0,O=fe);const P=(xe+Ce)*255,ee=(ge+Ce)*255,k=(O+Ce)*255;return _(P,ee,k)},R=(N,Z,me)=>{if(typeof N!="number")return"";const j=Math.round(N),K=u(me);return K==="celsius"?`${j}°C`:K==="fahrenheit"?`${j}°F`:K==="kelvin"?`${j}K`:K==="percent"||Z==="battery_level"||Z==="humidity"||Z==="brightness"?`${j}%`:K==="ppm"?`${j} ppm`:K==="lux"||K==="lx"||Z==="illumination"?`${j} lx`:K==="watt"||K==="w"?`${j} W`:K==="watt_hour"||K==="wh"?`${j} Wh`:K==="volt"||K==="v"||Z==="voltage"?`${j} V`:K==="ampere"||K==="a"?`${j} A`:K==="metre"||K==="meter"||K==="m"?`${j} m`:Z==="temperature_k"?`${j}K`:Z==="pressure"?`${j} hPa`:Z==="co2"?`${j} ppm`:Z==="water_level"?`${j}%`:String(j)},f=(N,{instance:Z,unit:me}={})=>N==null?"":typeof N=="number"?R(N,Z,me):typeof N=="boolean"?N?"Yes":"No":String(N),x=N=>{const Z=N?.state||{},me=Z.instance||N?.parameters?.instance,j=Z.value;if(j==null)return"";if(typeof j=="string")return me==="scene"?`Scene: ${a(j)}`:`Color: ${a(j)}`;if(typeof j=="number")return me==="temperature_k"||me==="temperature"?`Color Temp: ${Math.round(j)}K`:`Color: ${Math.round(j)}`;if(typeof j=="object"){if("temperature_k"in j)return`Color Temp: ${Math.round(j.temperature_k)}K`;if("temperature"in j)return`Color Temp: ${Math.round(j.temperature)}K`;if("r"in j&&"g"in j&&"b"in j)return`Color: ${_(j.r,j.g,j.b)}`;if("h"in j&&"s"in j&&"v"in j){const K=v(j.h,j.s,j.v);return K?`Color: ${K}`:""}}return me==="scene"&&Z.value?`Scene: ${a(String(Z.value))}`:""},M=te(()=>{const N=t.device?.capabilities||[],Z=t.device?.properties||[],me=N.find(fe=>i(fe).includes("on_off"));if(me&&me.state){const fe=me.state.value;let Ce=fe===!0?"On":fe===!1?"Off":"Unknown";const ge=N.find(O=>i(O).includes("range")&&(O.state?.instance==="brightness"||O.parameters?.instance==="brightness"))?.state?.value;return typeof ge=="number"&&(Ce+=` • ${ge}%`),Ce}const j=Z.find(fe=>fe.parameters?.instance==="motion"&&fe.state?.value);if(j)return String(j.state.value);const K=Z.find(fe=>fe.parameters?.instance==="battery_level"&&fe.state?.value!=null);if(K)return`${K.state.value}%`;const W=Z.find(fe=>fe.parameters?.instance==="illumination"&&fe.state?.value!=null);if(W)return`${W.state.value} lx`;const be=Z.find(fe=>fe.parameters?.instance==="temperature"&&fe.state?.value!=null);return be?`${be.state.value}°C`:"—"}),B=te(()=>{const N=M.value;return N==="On"||N.startsWith("On")&&N.includes("•")?"status-on":N==="Off"?"status-off":N==="—"||N==="Unknown"?"status-unknown":"status-neutral"}),X=te(()=>{const N=[],Z=new Set;return(t.device?.properties||[]).forEach(K=>{const W=K?.parameters?.instance||K?.state?.instance,be=K?.state?.value,fe=f(be,{instance:W,unit:K?.parameters?.unit});if(fe){const Ce=c(W);N.push(Ce?`${Ce}: ${fe}`:fe),W&&Z.add(W)}}),(t.device?.capabilities||[]).forEach(K=>{const W=i(K);if(!W.includes("on_off")){if(W.includes("range")){const be=K?.state?.instance||K?.parameters?.instance,fe=f(K?.state?.value,{instance:be,unit:K?.parameters?.unit});if(fe&&(!be||!Z.has(be))){const Ce=c(be);N.push(Ce?`${Ce}: ${fe}`:fe),be&&Z.add(be)}return}if(W.includes("color_setting")){const be=x(K);be&&N.push(be);return}if(W.includes("mode")){const be=K?.state?.instance||K?.parameters?.instance,fe=K?.state?.value;if(fe!=null){const Ce=c(be||"mode")||"Mode";N.push(`${Ce}: ${a(String(fe))}`)}}}}),!N.length&&M.value&&M.value!=="—"&&N.push(M.value),N}),w=te(()=>X.value.join(" • ")),y=te(()=>(t.device?.capabilities||[]).some(N=>i(N).includes("on_off"))),I=te(()=>(t.device?.capabilities||[]).find(me=>i(me).includes("on_off"))?.state?.value===!0),se=Ee(I.value),J=Ee(!1);Mt(I,N=>{se.value=N});const Y=Ee(""),oe=Ee("");async function re(){if(Y.value)return{api:Y.value,key:oe.value};const Z=await(await fetch("/config.json")).json();return Y.value=Z.api||"",oe.value=Z.apiKey||"",{api:Y.value,key:oe.value}}async function ce(){if(!y.value||J.value)return;const N=!se.value;se.value=N,J.value=!0;try{const{api:Z,key:me}=await re(),W=(t.device?.capabilities||[]).find(xe=>i(xe).includes("on_off"))?.type||"devices.capabilities.on_off",be=s.value?{op:"group_actions",groupId:t.device.id,actions:[{type:W,state:{instance:"on",value:N}}]}:{op:"set_device",id:t.device.id,on:N},fe=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json",...me?{"x-api-key":me}:{}},body:JSON.stringify(be)}),Ce=await fe.json().catch(()=>({}));if(!fe.ok||Ce.ok!==!0)throw new Error(Ce.error||`HTTP ${fe.status}`)}catch(Z){console.error("toggle failed",Z),se.value=!N}finally{J.value=!1}}return(N,Z)=>(C(),T("div",Dc,[d("div",Lc,[d("div",Kc,ae(o.value),1),d("div",Hc,[d("div",Uc,[d("div",Bc,ae(e.device.name||"Unnamed device"),1),r.value&&r.value!=="—"?(C(),T("div",Wc,ae(r.value),1)):Me("",!0)]),d("div",{class:Ue(["details",{empty:!w.value}])},ae(w.value||"—"),3)]),y.value?(C(),T("div",zc,[d("button",{class:Ue(["toggle",{on:se.value,loading:J.value}]),onClick:ce,disabled:J.value},[Z[0]||(Z[0]=d("span",{class:"dot","aria-hidden":"true"},null,-1)),d("span",qc,ae(se.value?"On":"Off"),1)],10,Gc)])):(C(),T("div",{key:1,class:Ue(["status side-status",B.value])},[Z[1]||(Z[1]=d("span",{class:"dot","aria-hidden":"true"},null,-1)),d("span",Jc,ae(M.value),1)],2))])]))}},Xc=bt(Yc,[["__scopeId","data-v-a858fd91"]]),Qc={key:0},Zc={key:1,style:{color:"#b00"}},ef={key:2,class:"grid"},tf={key:0,style:{color:"#666"}},nf={__name:"DeviceGrid",props:{apiBase:{type:String,required:!0},path:{type:String,required:!0},apiKey:{type:String,default:""}},setup(e){const t=e,n=Ee(!0),s=Ee(null),r=Ee([]),o=Ee([]),i=Ee({});Kn(async()=>{n.value=!0,s.value=null;try{const a=`${t.apiBase}${t.path}`,u=await(await fetch(a,{headers:{"Content-Type":"application/json",...t.apiKey?{"x-api-key":t.apiKey}:{}}})).json();Array.isArray(u.devices)||Array.isArray(u?.devices)?r.value=u.devices:Array.isArray(u?.payload?.devices)?r.value=u.payload.devices:r.value=[];const p=u.groups||u?.payload?.groups||[];o.value=Array.isArray(p)?p:[];const _=u.rooms||u?.payload?.rooms||[];i.value=Object.fromEntries(_.map(v=>[v.id,v]))}catch(a){s.value=a?.message||String(a)}finally{n.value=!1}});const l=te(()=>{const a=new Set;o.value.forEach(p=>{(p.devices||[]).forEach(_=>a.add(_))});const c=o.value.map(p=>({...p,entityType:"group",type:p.type||"devices.types.group",properties:p.properties||[]})),u=r.value.filter(p=>!a.has(p.id)).map(p=>({...p,entityType:p.entityType||"device"}));return[...c,...u]});return(a,c)=>(C(),T("div",null,[n.value?(C(),T("div",Qc,"Loading devices…")):s.value?(C(),T("div",Zc,"Error: "+ae(s.value),1)):(C(),T("div",ef,[(C(!0),T(Le,null,it(l.value,u=>(C(),xr(Xc,{key:u.id,device:u,"entity-type":u.entityType,"rooms-by-id":i.value},null,8,["device","entity-type","rooms-by-id"]))),128)),l.value.length===0?(C(),T("div",tf,"No devices")):Me("",!0)]))]))}},sf=bt(nf,[["__scopeId","data-v-139543c1"]]),rf={class:"home"},of={class:"hero"},lf={class:"card"},af={class:"actions"},uf={class:"card"},cf={class:"actions"},ff={key:0,class:"card"},df={class:"card"},pf={__name:"HomeView",setup(e){const t=Ee(null),n=Ee("—"),s=i=>{n.value=typeof i=="string"?i:JSON.stringify(i,null,2)};Kn(async()=>{t.value=await Er()});async function r(i){s(await Fc(i,"WebUI"))}async function o(i){s(await jc(i))}return(i,l)=>{const a=Xs("router-link");return C(),T("main",rf,[d("header",of,[l[5]||(l[5]=d("h1",null,"Home UI",-1)),We(a,{class:"link",to:"/scenarios"},{default:os(()=>[...l[4]||(l[4]=[kt("Перейти к сценариям",-1)])]),_:1})]),d("section",lf,[l[6]||(l[6]=d("h2",null,"Presence",-1)),d("div",af,[d("button",{onClick:l[0]||(l[0]=c=>r("home"))},"Send: home"),d("button",{onClick:l[1]||(l[1]=c=>r("away"))},"Send: away")])]),d("section",uf,[l[7]||(l[7]=d("h2",null,"Auto light test",-1)),d("div",cf,[d("button",{onClick:l[2]||(l[2]=c=>o("?mode=on"))},"Auto ON"),d("button",{onClick:l[3]||(l[3]=c=>o("?mode=off"))},"Auto OFF")])]),t.value?(C(),T("section",ff,[l[8]||(l[8]=d("h2",null,"Устройства",-1)),We(sf,{"api-base":t.value.api,path:"?op=userinfo"},null,8,["api-base"])])):Me("",!0),d("section",df,[l[9]||(l[9]=d("h2",null,"Log",-1)),d("pre",null,ae(n.value),1)])])}}},hf=bt(pf,[["__scopeId","data-v-101474e3"]]),mf={class:"list"},gf={key:0,class:"panel"},vf={key:1,class:"panel error"},yf={key:2,class:"grid"},_f={key:0,class:"empty"},bf={class:"card__header"},wf=["onClick","onKeyup"],Sf={key:0,class:"status status--paused"},xf={key:1,class:"status status--active"},kf=["disabled","onClick"],$f={key:0},Mf={key:1},Ef={class:"card__meta"},Cf={key:0},Af={__name:"ScenariosListView",setup(e){const t=Yi(),n=Ee({base:"",keyHeader:"x-api-key",keyValue:""}),s=Ee(!0),r=Ee(""),o=Ee([]),i=Ee({});async function l(){try{const y=await(await fetch("/config.json")).json();n.value.base=(y.scenariosUrl||y.scenariosURL||y.scenarioUrl||"").replace(/\/+$/,""),n.value.keyHeader=y.keyHeader||y["x-api-key-header"]||"x-api-key",n.value.keyValue=y.keyValue||y.apiKey||y["x-api-key"]||""}catch(w){r.value=`Не удалось загрузить config: ${w}`}}async function a(w,y={}){if(!n.value.base)throw new Error("scenarios URL not configured");const I={...y.headers||{}};y.body!==void 0&&!I["Content-Type"]&&(I["Content-Type"]="application/json"),n.value.keyValue&&(I[n.value.keyHeader||"x-api-key"]=n.value.keyValue);const se=await fetch(`${n.value.base}${w}`,{...y,headers:I,body:y.body!==void 0?JSON.stringify(y.body):void 0}),J=await se.text();let Y;try{Y=J?JSON.parse(J):null}catch{Y=null}if(!se.ok)throw new Error(Y?.error||se.statusText||"Request failed");return Y}async function c(){if(!n.value.base){o.value=[],s.value=!1;return}s.value=!0,r.value="";try{const w=await a("/list");Array.isArray(w?.scenarios)?o.value=w.scenarios.map(y=>{const I=String(y?.key||"").trim(),se=I.replace(/^scenarios\//,"").replace(/\.json$/i,""),J=String(y?.id||se||"").trim(),Y=String(y?.name||se||J||"").trim()||"Без имени";return{id:J,name:Y,key:I,size:Number(y?.size)||0,lastModified:y?.lastModified||"",pause:y?.pause||null,status:M(y?.status||null)}}):w?.ok===!1&&w?.error?(o.value=[],r.value=w.error):(o.value=[],r.value="Не удалось получить список сценариев")}catch(w){r.value=String(w),o.value=[]}finally{s.value=!1}}const u=te(()=>o.value.length>0),p=w=>{const y=Number(w)||0;return y<1024?`${y} B`:y<1024*1024?`${(y/1024).toFixed(1)} KB`:`${(y/1024/1024).toFixed(1)} MB`};function _(w){if(!w?.lastModified)return"";try{return new Date(w.lastModified).toLocaleString("ru-RU")}catch{return w.lastModified}}function v(w){w&&t.push({name:"scenario-edit",params:{id:w}})}function R(){t.push({name:"scenario-create"})}function f(w){return!!w?.pause}function x(w){if(!w?.pause)return"";if(w.pause.until)try{return`Пауза до ${new Date(w.pause.until).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`}catch{}return"На паузе"}function M(w){if(!w)return null;const y={ts:w.ts||null,origin:w.origin||null};return w.result&&(y.result={active:!!w.result.active,reason:w.result.reason||null}),w.error&&(y.error=w.error),y}function B(w){const y=w?.status;if(!y)return"Нет данных";if(y.error)return`Ошибка: ${y.error.message||y.error}`;if(y.result){if(y.result.reason==="manual_pause")return"На паузе";if(y.result.reason==="presence_guard")return"Заблокирован по присутствию";if(y.result.active)return"Активен";if(y.result.reason)return y.result.reason;if(y.result.active===!1)return"Не активен"}return"Нет данных"}async function X(w){if(!(!w?.id||i.value[w.id])){i.value={...i.value,[w.id]:!0};try{if(f(w)){const y=await a("/resume",{method:"POST",body:{id:w.id}});w.pause=y?.result?.pause||null,y?.status&&(w.status=M(y.status))}else{const y=await a("/pause",{method:"POST",body:{id:w.id}});w.pause=y?.pause||{setAt:Date.now(),reason:{source:"manual"}},y?.status&&(w.status=M(y.status))}}catch(y){r.value=String(y)}finally{i.value={...i.value,[w.id]:!1}}}}return Kn(async()=>{await l(),await c()}),(w,y)=>(C(),T("main",mf,[d("header",{class:"hero"},[y[0]||(y[0]=d("div",null,[d("h1",null,"Сценарии"),d("p",{class:"subtitle"},"Управляйте сценариями освещения и автоматизации")],-1)),d("button",{class:"primary",type:"button",onClick:R},"Создать новый сценарий")]),s.value?(C(),T("section",gf,[...y[1]||(y[1]=[d("p",null,"Загрузка списка…",-1)])])):r.value?(C(),T("section",vf,[d("p",null,ae(r.value),1)])):(C(),T("section",yf,[u.value?Me("",!0):(C(),T("article",_f," Пока нет сохранённых сценариев ")),(C(!0),T(Le,null,it(o.value,I=>(C(),T("article",{key:I.id||I.key||I.name,class:Ue(["card",{paused:f(I)}])},[d("header",bf,[d("div",{class:"card__title",role:"button",tabindex:"0",onClick:se=>v(I.id),onKeyup:Su(se=>v(I.id),["enter"])},[d("h2",null,ae(I.name),1),f(I)?(C(),T("p",Sf,ae(x(I)),1)):(C(),T("p",xf,ae(B(I)),1))],40,wf),d("button",{type:"button",class:"toggle",disabled:i.value[I.id],onClick:bu(se=>X(I),["stop"])},[f(I)?(C(),T("span",$f,"▶ Возобновить")):(C(),T("span",Mf,"⏸ Пауза"))],8,kf)]),d("footer",Ef,[I.lastModified?(C(),T("span",Cf,"Изменён: "+ae(_(I)),1)):Me("",!0),d("span",null,ae(p(I.size)),1)])],2))),128))]))]))}},Tf=bt(Af,[["__scopeId","data-v-eaeb034f"]]),Rf={class:"blk"},Pf={class:"blk__header"},Of={key:0,class:"counter"},If={key:0,class:"notice"},Nf={key:1,class:"alert alert--error"},Vf={key:2,class:"rooms__controls"},Ff={key:0,class:"rooms__info"},jf={key:3,class:"rooms"},Df={class:"room__header"},Lf={key:0,class:"room__hint"},Kf={class:"entries"},Hf={class:"entry__line"},Uf=["onClick"],Bf={class:"entry__label"},Wf=["value","checked","onChange"],zf={class:"entry__title"},Gf={class:"entry__headline"},qf={class:"badges"},Jf={key:0},Yf={class:"entry__members"},Xf={class:"member"},Qf=["value","checked","disabled","onChange"],Zf={class:"member__title"},ed={class:"entry__headline"},td={class:"badges"},nd={key:0},sd=["value","checked","onChange"],rd={class:"entry__title"},od={class:"entry__headline"},id={class:"badges"},ld={key:0,class:"muted"},ad={__name:"ScenarioDevicesSection",props:{modelValue:{type:Object,default:()=>({groups:[],devices:[]})},sections:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:[Object,String],default:null},showSelectedOnly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,r=Ee(new Set),o=te(()=>new Set(n.modelValue?.groups||[])),i=te(()=>new Set(n.modelValue?.devices||[])),l={brightness:"💡",color:"🌈"},a=te(()=>n.sections.flatMap(J=>Array.isArray(J.groups)?J.groups:[])),c=te(()=>n.sections.flatMap(J=>Array.isArray(J.devices)?J.devices:[])),u=te(()=>{const J=new Map;return c.value.forEach(Y=>{Y?.id&&!J.has(Y.id)&&J.set(Y.id,Y)}),a.value.forEach(Y=>{(Y.devices||[]).forEach(oe=>{oe?.id&&!J.has(oe.id)&&J.set(oe.id,oe)})}),Array.from(J.values())}),p=te(()=>o.value.size+i.value.size),_=Ee(!1);Mt(()=>n.showSelectedOnly,J=>{J||(_.value=!1)}),Mt(()=>p.value,J=>{J||(_.value=!1)});const v=te(()=>n.showSelectedOnly&&p.value>0),R=te(()=>v.value&&!_.value),f=te(()=>{if(!R.value)return n.sections||[];const J=(n.sections||[]).map(Y=>{const oe=[],re=[];return(Y.groups||[]).forEach(ce=>{const N=o.value.has(ce.id),Z=Array.isArray(ce.devices)?ce.devices:[];if(N){oe.push({...ce,devices:Z.slice()});return}const me=Z.filter(j=>i.value.has(j.id));me.length&&oe.push({...ce,devices:me})}),(Y.devices||[]).forEach(ce=>{i.value.has(ce.id)&&re.push(ce)}),!oe.length&&!re.length?null:{...Y,groups:oe,devices:re}}).filter(Boolean);return J.length?J:n.sections||[]}),x=te(()=>{const J=[];return a.value.forEach(Y=>{o.value.has(Y.id)&&J.push(Y.name||"Группа без имени")}),u.value.forEach(Y=>{if(i.value.has(Y.id)){const oe=Y.detail?`${Y.name} · ${Y.detail}`:Y.name;J.push(oe||"Устройство")}}),J.length?J.join(", "):"Ничего не выбрано"});function M(J,Y){s("update:modelValue",{groups:Array.from(J),devices:Array.from(Y)})}function B(J,Y){const oe=new Set(o.value),re=new Set(i.value),ce=Array.isArray(J.devices)?J.devices:[];Y?(oe.add(J.id),ce.forEach(N=>re.delete(N.id))):oe.delete(J.id),M(oe,re)}function X(J,Y,oe){const re=new Set(o.value),ce=new Set(i.value);oe?ce.add(Y.id):(ce.delete(Y.id),re.delete(J.id)),a.value.forEach(N=>{const Z=Array.isArray(N.devices)?N.devices.map(j=>j.id):[];Z.every(j=>ce.has(j))&&(re.add(N.id),Z.forEach(j=>ce.delete(j)))}),M(re,ce)}function w(J,Y){const oe=new Set(o.value),re=new Set(i.value);Y?re.add(J.id):re.delete(J.id),M(oe,re)}function y(J){const Y=[];return Object.keys(l).forEach(oe=>{J?.[oe]&&Y.push(l[oe])}),Y}function I(J){return r.value.has(J)}function se(J){const Y=new Set(r.value);Y.has(J)?Y.delete(J):Y.add(J),r.value=Y}return(J,Y)=>(C(),T("section",Rf,[d("header",Pf,[Y[2]||(Y[2]=d("div",null,[d("h2",null,"Целевые устройства"),d("p",{class:"blk__hint"},"Выберите группы или отдельные устройства. Устройства внутри выбранной группы исключаются из списка.")],-1)),p.value?(C(),T("span",Of,ae(p.value),1)):Me("",!0)]),d("p",{class:Ue(["summary",{empty:!p.value}])},ae(x.value),3),e.loading?(C(),T("div",If," Загрузка каталога устройств… ")):e.error?(C(),T("div",Nf," Не удалось загрузить список устройств ")):Me("",!0),v.value&&!e.loading?(C(),T("div",Vf,[R.value?(C(),T("span",Ff,"Показаны выбранные устройства.")):Me("",!0),R.value?(C(),T("button",{key:1,type:"button",class:"rooms__toggle",onClick:Y[0]||(Y[0]=oe=>_.value=!0)},"Показать все устройства")):_.value?(C(),T("button",{key:2,type:"button",class:"rooms__toggle",onClick:Y[1]||(Y[1]=oe=>_.value=!1)},"Скрыть список")):Me("",!0)])):Me("",!0),e.loading?Me("",!0):(C(),T("div",jf,[(C(!0),T(Le,null,it(f.value,oe=>(C(),T("div",{key:oe.id,class:"room"},[d("header",Df,[d("h3",null,ae(oe.name||"Без комнаты"),1),oe.mixed?(C(),T("span",Lf,"разные комнаты")):Me("",!0)]),d("div",Kf,[(C(!0),T(Le,null,it(oe.groups,re=>(C(),T("div",{key:re.id,class:Ue(["entry entry--group",{selected:o.value.has(re.id)}])},[d("div",Hf,[d("button",{type:"button",class:"entry__toggle",onClick:ce=>se(re.id)},[d("span",{class:Ue(["caret",{open:I(re.id)}])},"▸",2)],8,Uf),d("label",Bf,[d("input",{type:"checkbox",value:re.id,checked:o.value.has(re.id),onChange:ce=>B(re,ce.target.checked)},null,40,Wf),d("div",zf,[d("div",Gf,[d("strong",null,ae(re.name),1),d("span",qf,[(C(!0),T(Le,null,it(y(re.supports),ce=>(C(),T("span",{key:ce,class:"badge"},ae(ce),1))),128))])]),re.mixedRooms?(C(),T("small",Jf,"Разные комнаты")):Me("",!0)])])]),Ys(d("ul",Yf,[(C(!0),T(Le,null,it(re.devices,ce=>(C(),T("li",{key:ce.id},[d("label",Xf,[d("input",{type:"checkbox",value:ce.id,checked:o.value.has(re.id)||i.value.has(ce.id),disabled:o.value.has(re.id),onChange:N=>X(re,ce,N.target.checked)},null,40,Qf),d("div",Zf,[d("div",ed,[d("strong",null,ae(ce.name),1),d("span",td,[(C(!0),T(Le,null,it(y(ce.supports),N=>(C(),T("span",{key:N,class:"badge"},ae(N),1))),128))])]),re.mixedRooms&&ce.detail?(C(),T("small",nd,ae(ce.detail),1)):Me("",!0)])])]))),128))],512),[[eu,I(re.id)]])],2))),128)),(C(!0),T(Le,null,it(oe.devices,re=>(C(),T("label",{key:re.id,class:Ue(["entry entry--device",{selected:i.value.has(re.id)}])},[d("input",{type:"checkbox",value:re.id,checked:i.value.has(re.id),onChange:ce=>w(re,ce.target.checked)},null,40,sd),d("div",rd,[d("div",od,[d("strong",null,ae(re.name),1),d("span",id,[(C(!0),T(Le,null,it(y(re.supports),ce=>(C(),T("span",{key:ce,class:"badge"},ae(ce),1))),128))])])])],2))),128))])]))),128)),f.value.length?Me("",!0):(C(),T("p",ld,"Нет подходящих устройств."))]))]))}},ud=bt(ad,[["__scopeId","data-v-e9b6b849"]]),cd={class:"blk"},fd={class:"blk__header"},dd={key:0,class:"blk__hint warn"},pd={key:1,class:"blk__hint warn"},hd=["aria-checked"],md={key:0,class:"body"},gd={class:"mode-switch"},vd={key:0,class:"manual"},yd={class:"gradient"},_d={class:"gradient__bar"},bd={class:"gradient__markers"},wd=["title"],Sd=["value"],xd=["value"],kd={class:"manual__inputs"},$d={class:"manual__field"},Md=["value"],Ed={class:"manual__field"},Cd=["value"],Ad={key:1,class:"sensor"},Td=["value"],Rd=["value"],Pd={class:"sensor__pairs"},Od={class:"sensor__phrase"},Id={class:"sensor__line sensor__line--sensor"},Nd={class:"sensor__row"},Vd={class:"sensor__control"},Fd=["value"],jd={class:"sensor__line sensor__line--output"},Dd={class:"sensor__row"},Ld={class:"sensor__control"},Kd=["value"],Hd={class:"sensor__phrase"},Ud={class:"sensor__line sensor__line--sensor"},Bd={class:"sensor__row"},Wd={class:"sensor__control"},zd=["value"],Gd={class:"sensor__line sensor__line--output"},qd={class:"sensor__row"},Jd={class:"sensor__control"},Yd=["value"],Xd={key:1,class:"muted"},js=20,Qd={__name:"ScenarioMappingSection",props:{modelValue:{type:Object,required:!0},sensorOptions:{type:Array,default:()=>[]},support:{type:Object,default:()=>({available:!1,partial:!1})},runtime:{type:Object,default:()=>({active:!1,value:null,source:null})}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,r=f=>{const x=Number(f);return Number.isFinite(x)?x:null},o=(f,x,M)=>Number.isFinite(f)?Math.min(Math.max(f,x),M):x,i=f=>{const x={enabled:!!n.modelValue?.enabled,mode:n.modelValue?.mode==="sensor"?"sensor":"manual",manual:{from:n.modelValue?.manual?.from??80,to:n.modelValue?.manual?.to??20},sensor:{sensorId:n.modelValue?.sensor?.sensorId||"",sensorMin:n.modelValue?.sensor?.sensorMin??0,sensorMax:n.modelValue?.sensor?.sensorMax??2e3,outputMin:n.modelValue?.sensor?.outputMin??10,outputMax:n.modelValue?.sensor?.outputMax??100}};f.enabled!==void 0&&(x.enabled=f.enabled),f.mode&&(x.mode=f.mode),f.manual&&(x.manual={...x.manual,...f.manual}),f.sensor&&(x.sensor={...x.sensor,...f.sensor}),s("update:modelValue",x)},l=f=>{i({enabled:f})},a=f=>{i({mode:f==="sensor"?"sensor":"manual"})},c=(f,x)=>{const M=o(r(x)??(f==="from"?80:20),1,100);i({manual:{[f]:M}})},u=()=>{const f=n.modelValue?.manual?.from??80,x=n.modelValue?.manual?.to??20;i({manual:{from:x,to:f}})},p=(f,x)=>{i({sensor:{[f]:r(x)}})},_=f=>{i({sensor:{sensorId:f}})},v=te(()=>{const f=o(n.modelValue?.manual?.from??80,1,100),x=o(n.modelValue?.manual?.to??20,1,100),M=f-1,B=x-1,X=Math.min(f,x)-1,w=Math.max(0,Math.abs(x-f));return{fromValue:f,toValue:x,fromPercent:M,toPercent:B,startPercent:X,widthPercent:w}}),R=te(()=>{if(!n.runtime?.active)return null;const f=r(n.runtime?.value);if(!Number.isFinite(f))return null;const x=o(f,0,100),M=Math.max(x,1);return{value:Math.round(x),percent:M-1,fromBackend:n.runtime?.source==="backend"}});return(f,x)=>(C(),T("section",cd,[d("header",fd,[d("div",null,[x[12]||(x[12]=d("h2",null,"Изменение яркости",-1)),x[13]||(x[13]=d("p",{class:"blk__hint"}," Сценарий плавно управляет яркостью выбранных устройств. ",-1)),e.support.hasSelection&&!e.support.available?(C(),T("p",dd,"Выбранные устройства не поддерживают регулировку яркости.")):e.support.hasSelection&&e.support.partial?(C(),T("p",pd," Часть устройств без регулировки яркости — сценарий применится только к совместимым. ")):Me("",!0)]),d("button",{type:"button",class:"switch",role:"switch","aria-checked":e.modelValue.enabled,onClick:x[0]||(x[0]=M=>l(!e.modelValue.enabled))},[...x[14]||(x[14]=[d("span",{class:"switch__track"},[d("span",{class:"switch__thumb"})],-1)])],8,hd)]),e.modelValue.enabled?(C(),T("div",md,[d("div",gd,[d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.mode!=="sensor"}]),onClick:x[1]||(x[1]=M=>a("manual"))}," Ручной диапазон ",2),d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.mode==="sensor"}]),onClick:x[2]||(x[2]=M=>a("sensor"))}," По датчику ",2)]),e.modelValue.mode!=="sensor"?(C(),T("div",vd,[d("div",yd,[d("div",_d,[d("div",{class:"gradient__fill",style:et({left:`${v.value.startPercent}%`,width:`${v.value.widthPercent}%`})},null,4)]),d("div",bd,[d("span",{class:"marker-label marker-label--from",style:et({left:`calc(${v.value.fromPercent}% + ${js}px)`})},[...x[15]||(x[15]=[d("span",null,"Старт",-1)])],4),d("span",{class:"marker-label marker-label--to",style:et({left:`calc(${v.value.toPercent}% + ${js}px)`})},[...x[16]||(x[16]=[d("span",null,"Финиш",-1)])],4),R.value?(C(),T("span",{key:0,class:"gradient__marker gradient__marker--current",style:et({left:`calc(${R.value.percent}% + ${js}px)`}),title:R.value.fromBackend?"Факт с устройств":"Расчётное значение"}," Сейчас "+ae(R.value.value)+"% ",13,wd)):Me("",!0)]),d("input",{class:"slider slider--from",type:"range",min:"1",max:"100",value:e.modelValue.manual?.from??80,onInput:x[3]||(x[3]=M=>c("from",M.target.value))},null,40,Sd),d("input",{class:"slider slider--to",type:"range",min:"1",max:"100",value:e.modelValue.manual?.to??20,onInput:x[4]||(x[4]=M=>c("to",M.target.value))},null,40,xd)]),d("div",kd,[d("label",$d,[x[17]||(x[17]=d("span",null,"Старт",-1)),d("input",{type:"number",min:"1",max:"100",value:e.modelValue.manual?.from??80,onInput:x[5]||(x[5]=M=>c("from",M.target.value))},null,40,Md)]),d("button",{type:"button",class:"swap",onClick:u,title:"Поменять местами"}," ⇄ "),d("label",Ed,[x[18]||(x[18]=d("span",null,"Финиш",-1)),d("input",{type:"number",min:"1",max:"100",value:e.modelValue.manual?.to??20,onInput:x[6]||(x[6]=M=>c("to",M.target.value))},null,40,Cd)])])])):(C(),T("div",Ad,[d("label",null,[x[20]||(x[20]=d("span",null,"Датчик",-1)),d("select",{value:e.modelValue.sensor?.sensorId,onChange:x[7]||(x[7]=M=>_(M.target.value))},[x[19]||(x[19]=d("option",{value:""},"Выберите датчик…",-1)),(C(!0),T(Le,null,it(e.sensorOptions,M=>(C(),T("option",{key:M.id,value:M.id},[kt(ae(M.name)+" ",1),M.detail?(C(),T(Le,{key:0},[kt("— "+ae(M.detail),1)],64)):Me("",!0)],8,Rd))),128))],40,Td)]),d("div",Pd,[d("div",Od,[d("label",Id,[d("div",Nd,[x[22]||(x[22]=d("span",{class:"sensor__text"},"Когда на датчике",-1)),d("div",Vd,[d("input",{type:"number",maxlength:"5",inputmode:"decimal",value:e.modelValue.sensor?.sensorMin??0,onInput:x[8]||(x[8]=M=>p("sensorMin",M.target.value))},null,40,Fd),x[21]||(x[21]=d("span",{class:"unit"},"лк",-1))])]),x[23]||(x[23]=d("small",null,"Укажите минимум",-1))]),d("label",jd,[d("div",Dd,[x[25]||(x[25]=d("span",{class:"sensor__text"},"Яркость ламп",-1)),d("div",Ld,[d("input",{type:"number",min:"1",max:"100",maxlength:"5",inputmode:"decimal",value:e.modelValue.sensor?.outputMax??100,onInput:x[9]||(x[9]=M=>p("outputMax",M.target.value))},null,40,Kd),x[24]||(x[24]=d("span",{class:"unit"},"%",-1))])])])]),d("div",Hd,[d("label",Ud,[d("div",Bd,[x[27]||(x[27]=d("span",{class:"sensor__text"},"Когда на датчике",-1)),d("div",Wd,[d("input",{type:"number",maxlength:"5",inputmode:"decimal",value:e.modelValue.sensor?.sensorMax??0,onInput:x[10]||(x[10]=M=>p("sensorMax",M.target.value))},null,40,zd),x[26]||(x[26]=d("span",{class:"unit"},"лк",-1))])]),x[28]||(x[28]=d("small",null,"Укажите максимум",-1))]),d("label",Gd,[d("div",qd,[x[30]||(x[30]=d("span",{class:"sensor__text"},"Яркость ламп",-1)),d("div",Jd,[d("input",{type:"number",min:"1",max:"100",maxlength:"5",inputmode:"decimal",value:e.modelValue.sensor?.outputMin??10,onInput:x[11]||(x[11]=M=>p("outputMin",M.target.value))},null,40,Yd),x[29]||(x[29]=d("span",{class:"unit"},"%",-1))])])])])])]))])):(C(),T("p",Xd,"Блок отключён — яркость не изменяется."))]))}},Zd=bt(Qd,[["__scopeId","data-v-144335eb"]]),ep={class:"blk"},tp={class:"time-grid"},np={class:"slot"},sp={class:"mode-switch"},rp={key:0,class:"field"},op=["value"],ip={key:1,class:"field"},lp={class:"offset-final"},ap={class:"offset-slider"},up={class:"offset-slider__track"},cp=["value","aria-label"],fp={class:"offset-slider__labels below"},dp={class:"center"},pp={class:"slot"},hp={class:"mode-switch"},mp={key:0,class:"field"},gp=["value"],vp={key:1,class:"field"},yp={class:"offset-final"},_p={class:"offset-slider"},bp={class:"offset-slider__track"},wp=["value","aria-label"],Sp={class:"offset-slider__labels below"},xp={class:"center"},kp={class:"days"},$p={class:"days__set"},Mp=["value","checked","onChange"],Ep={__name:"ScenarioTimeSection",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,r=Object.freeze([{value:"1",label:"Пн"},{value:"2",label:"Вт"},{value:"3",label:"Ср"},{value:"4",label:"Чт"},{value:"5",label:"Пт"},{value:"6",label:"Сб"},{value:"7",label:"Вс"}]),o=w=>{const y=Number(w);return Number.isFinite(y)?Math.max(Math.min(y,720),-720):0},i=(w={},y="18:00")=>w?.type==="sun"?{type:"sun",anchor:w.anchor==="sunset"?"sunset":"sunrise",offsetMin:Number.isFinite(w.offsetMin)?w.offsetMin:0}:{type:"clock",time:w?.time||y},l=w=>{const y=Array.isArray(w)?w:[1,2,3,4,5,6,7];return Array.from(new Set(y.map(I=>Number(I)).filter(I=>Number.isFinite(I)&&I>=1&&I<=7))).sort((I,se)=>I-se)},a=w=>{let y=i(n.modelValue?.start,"18:00"),I=i(n.modelValue?.end,"23:00"),se=l(n.modelValue?.days);w.start&&(y=i({...y,...w.start},y.type==="clock"?y.time:"18:00")),w.end&&(I=i({...I,...w.end},I.type==="clock"?I.time:"23:00")),w.days&&(se=l(w.days)),s("update:modelValue",{tz:n.modelValue?.tz,lat:n.modelValue?.lat,lon:n.modelValue?.lon,start:y,end:I,days:se})},c=()=>{const w=i(n.modelValue?.start,"18:00");a({start:{type:"clock",time:w.type==="clock"?w.time:"18:00"}})},u=w=>{const y=i(n.modelValue?.start,"18:00"),I=y.type==="sun"?y.offsetMin:0;a({start:{type:"sun",anchor:w,offsetMin:I}})},p=()=>{const w=i(n.modelValue?.end,"23:00");a({end:{type:"clock",time:w.type==="clock"?w.time:"23:00"}})},_=w=>{const y=i(n.modelValue?.end,"23:00"),I=y.type==="sun"?y.offsetMin:0;a({end:{type:"sun",anchor:w,offsetMin:I}})},v=w=>a({start:{type:"clock",time:w||"18:00"}}),R=w=>a({end:{type:"clock",time:w||"23:00"}}),f=w=>{const y=Math.max(Math.min(Number(w),60),-60);a({start:{offsetMin:o(y)}})},x=w=>{const y=Math.max(Math.min(Number(w),60),-60);a({end:{offsetMin:o(y)}})},M=(w,y)=>{const I=new Set(l(n.modelValue?.days)),se=Number(w);y?I.add(se):I.delete(se),I.size||I.add(se),a({days:Array.from(I)})},B=w=>{const y=Math.abs(Number(w)||0),I=Math.floor(y/60),se=y%60;return I&&se?`${I}ч ${se}мин`:I?`${I}ч`:`${se}мин`},X=(w,y=0)=>{const I=w==="sunset"?"заката":"рассвета";return y?`${y>0?"Через":"За"} ${B(y)} ${y>0?"после":"до"} ${I}`:w==="sunset"?"На закате":"На рассвете"};return(w,y)=>(C(),T("section",ep,[y[23]||(y[23]=d("header",{class:"blk__header"},[d("h2",null,"Окно времени"),d("p",{class:"blk__hint"},"Рассвет и закат рассчитываются для фиксированной локации Europe/Moscow.")],-1)),d("div",tp,[d("fieldset",np,[y[14]||(y[14]=d("legend",null,"Старт",-1)),d("div",sp,[d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.start?.type!=="sun"}]),onClick:c}," Время ",2),d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.start?.type==="sun"&&e.modelValue.start?.anchor!=="sunset"}]),onClick:y[0]||(y[0]=I=>u("sunrise"))}," Рассвет ",2),d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.start?.type==="sun"&&e.modelValue.start?.anchor==="sunset"}]),onClick:y[1]||(y[1]=I=>u("sunset"))}," Закат ",2)]),e.modelValue.start?.type!=="sun"?(C(),T("div",rp,[y[8]||(y[8]=d("label",null,"Время",-1)),d("input",{type:"time",step:"60",value:e.modelValue.start?.time||"18:00",onInput:y[2]||(y[2]=I=>v(I.target.value))},null,40,op)])):(C(),T("div",ip,[d("div",lp,ae(X(e.modelValue.start?.anchor,e.modelValue.start?.offsetMin??0)),1),d("div",ap,[d("div",up,[y[9]||(y[9]=d("span",{class:"tick left"},null,-1)),y[10]||(y[10]=d("span",{class:"tick center"},null,-1)),y[11]||(y[11]=d("span",{class:"tick right"},null,-1)),d("input",{type:"range",min:"-60",max:"60",step:"5",value:Math.max(Math.min(e.modelValue.start?.offsetMin??0,60),-60),onInput:y[3]||(y[3]=I=>f(I.target.value)),class:Ue(["range-track",e.modelValue.start?.anchor==="sunrise"?"sunrise-track":"sunset-track"]),"aria-label":`Смещение относительно ${e.modelValue.start?.anchor==="sunrise"?"рассвета":"заката"}`},null,42,cp)]),d("div",fp,[y[12]||(y[12]=d("span",null,"−1ч",-1)),d("span",dp,ae(e.modelValue.start?.anchor==="sunrise"?"Рассвет":"Закат"),1),y[13]||(y[13]=d("span",null,"+1ч",-1))])])]))]),d("fieldset",pp,[y[21]||(y[21]=d("legend",null,"Финиш",-1)),d("div",hp,[d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.end?.type!=="sun"}]),onClick:p}," Время ",2),d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.end?.type==="sun"&&e.modelValue.end?.anchor!=="sunset"}]),onClick:y[4]||(y[4]=I=>_("sunrise"))}," Рассвет ",2),d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.end?.type==="sun"&&e.modelValue.end?.anchor==="sunset"}]),onClick:y[5]||(y[5]=I=>_("sunset"))}," Закат ",2)]),e.modelValue.end?.type!=="sun"?(C(),T("div",mp,[y[15]||(y[15]=d("label",null,"Время",-1)),d("input",{type:"time",step:"60",value:e.modelValue.end?.time||"23:00",onInput:y[6]||(y[6]=I=>R(I.target.value))},null,40,gp)])):(C(),T("div",vp,[d("div",yp,ae(X(e.modelValue.end?.anchor,e.modelValue.end?.offsetMin??0)),1),d("div",_p,[d("div",bp,[y[16]||(y[16]=d("span",{class:"tick left"},null,-1)),y[17]||(y[17]=d("span",{class:"tick center"},null,-1)),y[18]||(y[18]=d("span",{class:"tick right"},null,-1)),d("input",{type:"range",min:"-60",max:"60",step:"5",value:Math.max(Math.min(e.modelValue.end?.offsetMin??0,60),-60),onInput:y[7]||(y[7]=I=>x(I.target.value)),class:Ue(["range-track",e.modelValue.end?.anchor==="sunrise"?"sunrise-track":"sunset-track"]),"aria-label":`Смещение относительно ${e.modelValue.end?.anchor==="sunrise"?"рассвета":"заката"}`},null,42,wp)]),d("div",Sp,[y[19]||(y[19]=d("span",null,"−1ч",-1)),d("span",xp,ae(e.modelValue.end?.anchor==="sunrise"?"Рассвет":"Закат"),1),y[20]||(y[20]=d("span",null,"+1ч",-1))])])]))])]),d("div",kp,[y[22]||(y[22]=d("span",{class:"days__label"},"Дни недели",-1)),d("div",$p,[(C(!0),T(Le,null,it(It(r),I=>(C(),T("label",{key:I.value,class:"day"},[d("input",{type:"checkbox",value:I.value,checked:l(e.modelValue.days).includes(Number(I.value)),onChange:se=>M(I.value,se.target.checked)},null,40,Mp),d("span",null,ae(I.label),1)]))),128))])])]))}},Cp=bt(Ep,[["__scopeId","data-v-483c1d5d"]]),Ap={class:"blk"},Tp={class:"blk__header"},Rp={key:0,class:"blk__hint warn"},Pp={key:1,class:"blk__hint warn"},Op=["aria-checked"],Ip={class:"switch__label"},Np={key:0,class:"body"},Vp={class:"mode-switch"},Fp={key:0,class:"temperature"},jp={class:"temperature__summary"},Dp={class:"temperature__control"},Lp={class:"temperature__track-wrapper"},Kp={class:"temperature__tooltip-value"},Hp={class:"temperature__ticks"},Up={class:"temperature__tick-label"},Bp={key:1,class:"colors"},Wp={class:"colors__row"},zp={class:"colors__endpoint"},Gp={class:"colors__swatch"},qp=["value"],Jp={class:"colors__gradient-wrapper"},Yp={class:"colors__tooltip-value"},Xp={class:"colors__endpoint colors__endpoint--right"},Qp={class:"colors__swatch"},Zp=["value"],eh={key:1,class:"muted"},He=2e3,Be=7e3,xo=100,Jn=100,ko=2e3,$o=7e3,th=5500,Mo="#ffb56b",Eo="#ffffff",Co="#6cb8ff",nh={__name:"ColorRamp",props:{modelValue:{type:Object,required:!0},support:{type:Object,default:()=>({available:!1,partial:!1})},runtime:{type:Object,default:()=>({active:!1,mode:"temperature",temperature:null,colorHex:null,progress:null,source:null})}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,r=(O,P,ee)=>Number.isFinite(O)?Math.min(Math.max(O,P),ee):P,o=(...O)=>{},i=O=>Math.round(O/xo)*xo,l=O=>(r(O,He,Be)-He)/(Be-He)*100,a=O=>{const P=Number(O);return Number.isFinite(P)?P:null},c=O=>{const P={enabled:!!n.modelValue?.enabled,mode:n.modelValue?.mode==="colors"?"colors":"temperature",temperature:{fromK:n.modelValue?.temperature?.fromK??ko,toK:n.modelValue?.temperature?.toK??$o},colors:{from:{h:n.modelValue?.colors?.from?.h??35,s:n.modelValue?.colors?.from?.s??70,v:n.modelValue?.colors?.from?.v??90},to:{h:n.modelValue?.colors?.to?.h??210,s:n.modelValue?.colors?.to?.s??40,v:n.modelValue?.colors?.to?.v??60}}};O.enabled!==void 0&&(P.enabled=O.enabled),O.mode&&(P.mode=O.mode),O.temperature&&(P.temperature={...P.temperature,...O.temperature}),O.colors&&(P.colors={from:{...P.colors.from,...O.colors.from||{}},to:{...P.colors.to,...O.colors.to||{}}}),s("update:modelValue",P)},u=O=>{c({enabled:O})},p=O=>{c({mode:O==="colors"?"colors":"temperature"})},_=(O,P,ee)=>{const k=((O??0)%360+360)%360,F=r(P??0,0,100)/100,D=r(ee??0,0,100)/100,z=D*F,ne=z*(1-Math.abs(k/60%2-1)),h=D-z;let m=0,b=0,$=0;return k<60?(m=z,b=ne,$=0):k<120?(m=ne,b=z,$=0):k<180?(m=0,b=z,$=ne):k<240?(m=0,b=ne,$=z):k<300?(m=ne,b=0,$=z):(m=z,b=0,$=ne),{r:Math.round((m+h)*255),g:Math.round((b+h)*255),b:Math.round(($+h)*255)}},v=(O,P,ee)=>`#${[O,P,ee].map(F=>r(Math.round(F),0,255).toString(16).padStart(2,"0")).join("")}`,R=O=>{const P=_(O.h,O.s,O.v);return v(P.r,P.g,P.b)},f=O=>{const P=String(O||"").replace("#","");return P.length!==6?{r:0,g:0,b:0}:{r:parseInt(P.slice(0,2),16),g:parseInt(P.slice(2,4),16),b:parseInt(P.slice(4,6),16)}},x=O=>{const P=O.r/255,ee=O.g/255,k=O.b/255,F=Math.max(P,ee,k),D=Math.min(P,ee,k),z=F-D;let ne=0;if(z!==0){switch(F){case P:ne=(ee-k)/z%6;break;case ee:ne=(k-P)/z+2;break;default:ne=(P-ee)/z+4;break}ne*=60,ne<0&&(ne+=360)}const h=F===0?0:z/F,m=F;return{h:Math.round(ne),s:Math.round(h*100),v:Math.round(m*100)}},M=(O,P)=>{const ee=R(O),k=R(P);return`linear-gradient(90deg, ${ee}, ${k})`},B=(O,P)=>{const ee=O==="fromK"?ko:$o,k=r(a(P)??ee,He,Be),F=r(i(k),He,Be);c({temperature:{[O]:F}})},X=Ee(null);let w=null;function y(O,P){const{fromK:ee,toK:k}=oe.value;let F=r(P,He,Be);const D=i(F);if(O==="fromK")if(ee<=k){const ne=Math.max(He,k-Jn);F=D>ne?ne:D}else{const ne=Math.min(Be,k+Jn);F=D<ne?ne:D}else if(ee<=k){const ne=Math.min(Be,ee+Jn);F=D<ne?ne:D}else{const ne=Math.max(He,ee-Jn);F=D>ne?ne:D}const z=r(F,He,Be);B(O,z)}function I(O,P){const ee=X.value;if(!ee)return;const k=ee.getBoundingClientRect();if(!k||k.width===0)return;const F=P.pointerId??0,D=P.clientX,z=P.clientY;let ne=!1,h=0;const b=((O==="fromK"?oe.value.fromK:oe.value.toK)-He)/(Be-He),$=re.value?b:1-b,A=P.currentTarget,E=()=>{if(window.removeEventListener("pointermove",G),window.removeEventListener("pointerup",H),ne&&A?.releasePointerCapture)try{A.releasePointerCapture(F)}catch{}w=null,ne=!1},G=L=>{if(L.pointerId!==F)return;if(!ne){const pe=Math.abs(L.clientX-D),$e=Math.abs(L.clientY-z);if(pe<4&&$e<4)return;if($e>pe){E();return}h=r((D-k.left)/k.width,0,1)-$,A?.setPointerCapture&&A.setPointerCapture(F),w={pointerId:F,offsetRatio:h,rect:k},ne=!0}const V=w;if(!V)return;const le=r((L.clientX-V.rect.left)/V.rect.width,0,1),q=r(le-(V.offsetRatio??0),0,1),ie=re.value?He+q*(Be-He):Be-q*(Be-He);o("[ColorRamp] drag move",{field:O,pointerId:F,clientX:L.clientX,ratioRaw:le,adjustedRatio:q,next:ie}),y(O,ie)},H=L=>{L.pointerId===F&&E()};window.addEventListener("pointermove",G),window.addEventListener("pointerup",H)}function se(){const{fromK:O,toK:P}=oe.value,ee=r(i(P),He,Be),k=r(i(O),He,Be);c({temperature:{fromK:ee,toK:k}})}const J=(O,P)=>{const ee=f(P),k=x(ee);c({colors:{[O]:k}})},Y=te(()=>n.modelValue?.mode==="colors"?"colors":"temperature"),oe=te(()=>{const O=r(n.modelValue?.temperature?.fromK??4e3,He,Be),P=r(n.modelValue?.temperature?.toK??2700,He,Be),ee=r(i(O),He,Be),k=r(i(P),He,Be);return{fromK:ee,toK:k}}),re=te(()=>oe.value.fromK<=oe.value.toK),ce=te(()=>{const O=l(th);if(re.value)return`linear-gradient(90deg, ${Mo} 0%, ${Eo} ${O}%, ${Co} 100%)`;const P=100-O;return`linear-gradient(90deg, ${Co} 0%, ${Eo} ${P}%, ${Mo} 100%)`}),N=te(()=>{const O=[];for(let P=He;P<=Be;P+=1e3)O.push(P);return re.value?O:O.reverse()}),Z=te(()=>({start:re.value?He:Be,end:re.value?Be:He})),me=O=>{const P=l(O);return re.value?P:100-P},j=O=>me(O),K=O=>{const{start:P,end:ee}=Z.value;return{"temperature__tick--start":O===P,"temperature__tick--end":O===ee}},W=te(()=>me(oe.value.fromK)),be=te(()=>me(oe.value.toK)),fe=O=>({left:`${r(O,0,100)}%`}),Ce=te(()=>`Изменение температуры от ${oe.value.fromK}K до ${oe.value.toK}K`),xe=te(()=>{if(!n.runtime?.active)return o("[ColorRamp] temperatureMarker: runtime inactive",n.runtime),null;if(Y.value==="colors")return o("[ColorRamp] temperatureMarker: mode colors, skip",n.runtime),null;const O=a(n.runtime?.temperature);if(!Number.isFinite(O))return o("[ColorRamp] temperatureMarker: runtime temperature not finite",n.runtime?.temperature),null;const P=r(O,He,Be),ee=r(me(P),0,100);return{value:Math.round(P),percent:ee,source:n.runtime?.source||"runtime"}}),ge=te(()=>{if(!n.runtime?.active||Y.value!=="colors")return null;const O=a(n.runtime?.progress),P=Number.isFinite(O)?r(O*100,0,100):50;if(!(typeof n.runtime?.colorHex=="string"||n.runtime?.hsv)&&!Number.isFinite(O))return null;let k=n.runtime?.colorHex;(!k||k==="")&&n.runtime?.hsv&&(k=R(n.runtime.hsv));const F=Number.isFinite(O)?`${Math.round(P)}%`:"";return{percent:P,hex:k,value:F}});return(O,P)=>(C(),T("section",Ap,[d("header",Tp,[d("div",null,[P[7]||(P[7]=d("h2",null,"Изменение цвета",-1)),P[8]||(P[8]=d("p",{class:"blk__hint"}," Плавная смена температуры или цвета в течение окна сценария. ",-1)),e.support.hasSelection&&!e.support.available?(C(),T("p",Rp,"Выбранные устройства не поддерживают изменение цвета.")):e.support.hasSelection&&e.support.partial?(C(),T("p",Pp," Часть устройств без поддержки цвета — действие применится только к совместимым. ")):Me("",!0)]),d("button",{type:"button",class:"switch",role:"switch","aria-checked":e.modelValue.enabled,onClick:P[0]||(P[0]=ee=>u(!e.modelValue.enabled))},[P[9]||(P[9]=d("span",{class:"switch__track"},[d("span",{class:"switch__thumb"})],-1)),d("span",Ip,ae(e.modelValue.enabled?"Включено":"Выключено"),1)],8,Op)]),e.modelValue.enabled?(C(),T("div",Np,[d("div",Vp,[d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.mode!=="colors"}]),onClick:P[1]||(P[1]=ee=>p("temperature"))}," Температура ",2),d("button",{type:"button",class:Ue(["mode-chip",{active:e.modelValue.mode==="colors"}]),onClick:P[2]||(P[2]=ee=>p("colors"))}," Цвета ",2)]),Y.value!=="colors"?(C(),T("div",Fp,[d("p",jp,ae(Ce.value),1),d("div",Dp,[d("div",Lp,[d("div",{class:"temperature__track",ref_key:"temperatureTrack",ref:X,style:et({"--temperature-gradient":ce.value})},[d("div",{class:"temperature__mask temperature__mask--left",style:et({width:`${W.value}%`})},null,4),d("div",{class:"temperature__mask temperature__mask--right",style:et({width:`${100-be.value}%`})},null,4),d("button",{type:"button",class:"temperature__thumb temperature__thumb--from",style:et(fe(W.value)),onPointerdown:P[3]||(P[3]=ee=>I("fromK",ee))},null,36),d("button",{type:"button",class:"temperature__thumb temperature__thumb--to",style:et(fe(be.value)),onPointerdown:P[4]||(P[4]=ee=>I("toK",ee))},null,36)],4),xe.value?(C(),T("div",{key:0,class:"temperature__tooltip",style:et({left:`${xe.value.percent}%`})},[P[10]||(P[10]=d("span",{class:"temperature__tooltip-label"},"Сейчас",-1)),d("span",Kp,ae(xe.value.value)+" K",1)],4)):Me("",!0),d("div",Hp,[(C(!0),T(Le,null,it(N.value,ee=>(C(),T("span",{key:ee,class:Ue(["temperature__tick",K(ee)]),style:et({left:`${j(ee)}%`})},[P[11]||(P[11]=d("span",{class:"temperature__tick-mark"},null,-1)),d("span",Up,ae(ee)+"K",1)],6))),128))])]),d("button",{type:"button",class:"temperature__invert",onClick:se,title:"Инвертировать диапазон"},"⇄")])])):(C(),T("div",Bp,[d("div",Wp,[d("div",zp,[P[12]||(P[12]=d("span",{class:"colors__label"},"Старт",-1)),d("label",Gp,[d("input",{type:"color",value:R(e.modelValue.colors?.from??{h:0,s:0,v:100}),onInput:P[5]||(P[5]=ee=>J("from",ee.target.value))},null,40,qp)])]),d("div",Jp,[d("div",{class:"colors__gradient",style:et({background:M(e.modelValue.colors?.from??{},e.modelValue.colors?.to??{})})},null,4),ge.value?(C(),T("div",{key:0,class:"colors__tooltip",style:et({left:`${ge.value.percent}%`})},[P[13]||(P[13]=d("span",{class:"colors__tooltip-label"},"Сейчас",-1)),d("span",Yp,ae(ge.value.value||" "),1)],4)):Me("",!0)]),d("div",Xp,[P[14]||(P[14]=d("span",{class:"colors__label"},"Финиш",-1)),d("label",Qp,[d("input",{type:"color",value:R(e.modelValue.colors?.to??{h:0,s:0,v:100}),onInput:P[6]||(P[6]=ee=>J("to",ee.target.value))},null,40,Zp)])])])]))])):(C(),T("p",eh,"Блок отключён — цвет не изменяется."))]))}},sh=bt(nh,[["__scopeId","data-v-1b5b5cea"]]),Cr=(e,t)=>{if(!e)return null;const n=[{value:e,key:void 0}],s=new Set;for(;n.length;){const{value:r,key:o}=n.pop(),i=t(r,o);if(i!=null)return i;if(!(!r||typeof r!="object")&&!s.has(r))if(s.add(r),Array.isArray(r))for(let l=r.length-1;l>=0;l--)n.push({value:r[l],key:void 0});else Object.keys(r).forEach(l=>{n.push({value:r[l],key:l})})}return null},Ds=e=>Cr(e,(t,n)=>typeof t=="number"&&typeof n=="string"&&n.toLowerCase().includes("brightness")?t:t&&typeof t=="object"&&t.instance==="brightness"&&typeof t.value=="number"?t.value:null),Ls=e=>Cr(e,(t,n)=>{if(typeof t=="number"&&typeof n=="string"){const s=n.toLowerCase();if(s.includes("temperature_k")||s.includes("color_temperature")||s==="temperature")return t}if(t&&typeof t=="object"){if(typeof t.temperature_k=="number")return t.temperature_k;if(typeof t.color_temperature=="number")return t.color_temperature;const s=String(t.instance||"").toLowerCase();if((s==="temperature_k"||s==="temperature")&&typeof t.value=="number")return t.value}return null}),Ks=e=>{const t=Cr(e,n=>{if(n&&typeof n=="object"){if(typeof n.h=="number"&&typeof n.s=="number"&&typeof n.v=="number")return n;if(n.state&&typeof n.state=="object"){const s=n.state;if(typeof s.h=="number"&&typeof s.s=="number"&&typeof s.v=="number")return s}}return null});return t?{h:Number.isFinite(t.h)?t.h:0,s:Number.isFinite(t.s)?t.s:0,v:Number.isFinite(t.v)?t.v:0}:null},Zt=(e,t,n)=>Number.isFinite(e)?Math.min(Math.max(e,t),n):t,Hs=e=>{if(!e)return null;const t=Zt(Number(e.h)||0,0,360),n=Zt(Number(e.s)||0,0,100)/100,s=Zt(Number(e.v)||0,0,100)/100,r=s*n,o=r*(1-Math.abs(t/60%2-1)),i=s-r;let l=0,a=0,c=0;t<60?(l=r,a=o,c=0):t<120?(l=o,a=r,c=0):t<180?(l=0,a=r,c=o):t<240?(l=0,a=o,c=r):t<300?(l=o,a=0,c=r):(l=r,a=0,c=o);const u=p=>Math.round((p+i)*255).toString(16).padStart(2,"0");return`#${u(l)}${u(a)}${u(c)}`.toUpperCase()},rh=e=>{const t=Number(e);return Number.isFinite(t)?{r:t>>16&255,g:t>>8&255,b:t&255}:null},oh=({r:e,g:t,b:n})=>{const s=o=>Math.max(0,Math.min(255,Math.round(Number(o)||0)));return`#${[e,t,n].map(o=>s(o).toString(16).padStart(2,"0")).join("").toUpperCase()}`},ih=(e,t,n)=>{const s=Number(e)||0;let o=((Number(t)||0)-s+540)%360-180;return s+o*n},lr=(e,t,n)=>{const s=Number(e)||0,r=Number(t)||0;return s+(r-s)*n},lh=(e,t,n)=>{const s=Zt(n,0,1);return{h:Zt(Math.round(ih(e.h,t.h,s)),0,360),s:Zt(Math.round(lr(e.s,t.s,s)),0,100),v:Zt(Math.round(lr(e.v,t.v,s)),0,100)}},Xi=e=>(e?.capabilities||[]).some(t=>(t?.type||"").includes("range")?(t?.parameters?.instance||t?.state?.instance)==="brightness":!1),Qi=e=>(e?.capabilities||[]).some(t=>{if(t?.type!=="devices.capabilities.color_setting")return!1;const n=t?.parameters?.color_models||[],s=t?.parameters?.color_model;return!!(s==="hsv"||s==="rgb"||s==="xy"||s==="color_temperature"||n.includes?.("hsv")||n.includes?.("rgb")||n.includes?.("color_temperature"))}),ah=e=>(e?.capabilities||[]).some(t=>t?.type==="devices.capabilities.on_off"),Ao=e=>{if(!e)return!1;const n=(e.capabilities||[]).map(f=>String(f?.type||"").toLowerCase()).includes("devices.capabilities.on_off"),s=Xi(e),r=Qi(e);if(!n&&!s&&!r)return!1;const i=[e.type,e.deviceType,e.device_type,e.kind,e.device_kind,e.icon].map(f=>String(f||"").toLowerCase()).filter(Boolean).join(" "),l=String(e.name||"").toLowerCase();if(i.includes("sensor"))return!1;const c=i.includes("switch")||i.includes("socket")||i.includes("outlet")||i.includes("plug")||i.includes("relay"),u=i.includes("light")||i.includes("lamp")||i.includes("bulb")||i.includes("strip"),p=/(lamp|ламп|strip|подсвет|свет)/.test(l),_=i.includes("media_device")||i.includes("tv")||i.includes("speaker"),v=/(tv|телев|yandex|станц|колонк|speaker|магритт|magritte)/.test(l);return s||r?!0:!n||(_||v)&&!s&&!r?!1:u||p?!0:c&&!p||/(розетк|socket|plug|outlet|утюг|чайник|кофе|пылесос|vacuum|humidifier|увлажнител|heater|обогрев|кондиционер|фен|робот|очистител|purifier|термостат|терморегул|штора|гардина)/.test(l)?!1:n},Us=(e,t)=>{const n=e?.room||"",s=n?t.value.get(n)?.name:"";return{id:e.id,name:e.name||"Без имени",detail:s||e.roomName||"",roomId:n,supports:{brightness:Xi(e),color:Qi(e),power:ah(e)}}};function uh(e,t){const n=te(()=>{const c=new Map;return(e.rooms||[]).forEach(u=>{u?.id&&c.set(u.id,u)}),c}),s=te(()=>{const c=new Map;return(e.devices||[]).forEach(u=>{u?.id&&c.set(u.id,u)}),c}),r=te(()=>(e.groups||[]).map(c=>{const p=(Array.isArray(c.devices)?c.devices:[]).map(M=>s.value.get(M)).filter(Ao).map(M=>Us(M,n));if(!p.length)return null;const _=p.reduce((M,B)=>({brightness:M.brightness||B.supports.brightness,color:M.color||B.supports.color,power:M.power||B.supports.power}),{brightness:!1,color:!1,power:!1}),v=Array.from(new Set(p.map(M=>M.roomId).filter(M=>typeof M=="string"&&M.length)));let R="",f="",x=!1;return v.length?v.length===1?(R=v[0],f=n.value.get(R)?.name||""):(x=!0,R="__mixed__",f="Разные комнаты"):(R="",f=""),{id:c.id,name:c.name||"Группа без имени",devices:p,supports:_,roomId:R,roomName:f,mixedRooms:x}}).filter(Boolean)),o=te(()=>{const c=new Set;return r.value.forEach(u=>{u.devices.forEach(p=>c.add(p.id))}),c}),i=te(()=>(e.devices||[]).filter(c=>Ao(c)&&!o.value.has(c.id)).map(c=>Us(c,n))),l=te(()=>{const c=new Map;(e.rooms||[]).forEach((v,R)=>{v?.id&&c.set(v.id,R)});const u=(v,R,f,x={})=>{const M=R||"__unknown__";v.has(M)||v.set(M,{id:M,name:f||n.value.get(R)?.name||"Без комнаты",groups:[],devices:[],...x});const B=v.get(M);if(f&&!B.name&&(B.name=f),typeof x.order=="number"){const X=x.order;B.order=typeof B.order=="number"?Math.min(B.order,X):X}return x.mixed&&(B.mixed=!0),B},p=new Map;r.value.forEach(v=>{const R=v.mixedRooms?"__mixed__":v.roomId||"__unknown__",f=v.mixedRooms?"Разные комнаты":n.value.get(v.roomId)?.name||v.roomName||"Без комнаты",x=u(p,R,f,{order:v.mixedRooms?Number.MAX_SAFE_INTEGER-1:c.get(v.roomId)??Number.MAX_SAFE_INTEGER-2,mixed:v.mixedRooms});v.mixedRooms&&(x.mixed=!0),x.groups.push(v)}),i.value.forEach(v=>{const R=v.roomId||"__unknown__",f=v.roomId?n.value.get(v.roomId)?.name||v.detail||"":"Без комнаты";u(p,R,f,{order:c.get(v.roomId)??Number.MAX_SAFE_INTEGER-2}).devices.push(v)});const _=Array.from(p.values()).filter(v=>v.groups.length||v.devices.length);return _.sort((v,R)=>{const f=v.order??Number.MAX_SAFE_INTEGER,x=R.order??Number.MAX_SAFE_INTEGER;return f!==x?f-x:v.name.localeCompare(R.name,"ru")}),_}),a=te(()=>{const c=new Map;return(t.devices||[]).forEach(u=>{const p=s.value.get(u);p&&c.set(u,Us(p,n))}),(t.groups||[]).forEach(u=>{r.value.find(_=>_.id===u)?.devices.forEach(_=>c.set(_.id,_))}),Array.from(c.values())});return{roomsById:n,devicesById:s,sections:l,selectedDevices:a,groupEntries:r,standaloneDevices:i}}const ch={class:"editor"},fh={class:"editor__header"},dh={class:"editor__head"},ph={class:"editor__meta"},hh={key:0,class:"badge badge--dirty"},mh={key:1,class:"badge badge--loading"},gh={key:0},vh={key:1},yh={class:"editor__summary"},_h={key:0,class:"pause-info"},bh={key:0,class:"status-block"},wh={class:"status-block__header"},Sh={key:0},xh={key:0},kh={key:0},$h={key:1},Mh={key:2},Eh={key:3},Ch={key:4},Ah={class:"stack"},Th={class:"presence-block"},Rh={class:"presence-block__options"},Ph=["value"],Oh={class:"presence-option__text"},Ih={class:"actions"},Nh=["disabled"],Vh={key:0},Fh={key:1},jh=["disabled"],Dh={key:0},Lh={key:1},Kh=["disabled"],Hh={key:0},Uh={key:1},Bh={class:"log"},Wh={key:0,class:"alert alert--error"},zh={key:1,class:"alert alert--warn"},Gh={key:0},qh={key:1},Jh={key:2,class:"alert alert--info"},Yh={key:3,class:"muted"},Xh={__name:"ScenarioEditor",props:{scenarioId:{type:String,default:""}},emits:["saved","deleted"],setup(e,{emit:t}){const n=e,s=t,r=Object.freeze({а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"e",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya"});function o(g){const S=String(g||"").trim().toLowerCase();return S?S.split("").map(Q=>/[a-z0-9]/.test(Q)?Q:r[Q]!==void 0?r[Q]:/\s|[-_]/.test(Q)?"-":"").join("").replace(/-+/g,"-").replace(/^-|-$/g,"").slice(0,80):""}function i(g){const S=String(g||"").trim();return S?S.replace(/\/+$/,""):""}function l(g,S,U){return Number.isFinite(g)?Math.min(Math.max(g,S),U):S}function a(g){const S=Number(g);return Number.isFinite(S)?S:null}function c(g){return Array.from(new Set((Array.isArray(g)?g:[]).map(S=>String(S||"").trim()).filter(Boolean)))}function u(g){if(!g)return"—";try{return new Date(g).toLocaleString("ru-RU")}catch{return String(g)}}function p(g){return g?g.error?g.error:g.active?"Активен":g.reason==="manual_pause"?"На паузе":g.reason==="presence_guard"?"Заблокирован по присутствию":g.reason?g.reason:g.active===!1?"Не активен":"":""}function _(g){if(!g)return"—";const S=[];return typeof g.anyoneHome=="boolean"&&S.push(g.anyoneHome?"кто-то дома":"никого нет"),Array.isArray(g.considered)&&g.considered.length&&S.push(`учтены: ${g.considered.join(", ")}`),g.reason&&S.push(`причина: ${g.reason}`),S.length?S.join(" · "):"—"}const v=tn({scenariosBase:"",apiKey:""}),R=tn({devices:[],groups:[],rooms:[]}),f=tn({id:"",name:"",target:{groups:[],devices:[]},time:{tz:"Europe/Moscow",lat:55.751,lon:37.617,start:{type:"clock",time:"18:00"},end:{type:"clock",time:"23:00"},days:[1,2,3,4,5,6,7]},brightness:{enabled:!0,mode:"manual",manual:{from:80,to:20},sensor:{sensorId:"",sensorMin:0,sensorMax:2e3,outputMin:10,outputMax:100}},color:{enabled:!1,mode:"temperature",temperature:{fromK:4e3,toK:2700},colors:{from:{h:35,s:70,v:90},to:{h:210,s:40,v:60}}},presence:{mode:"always"},runtimeExtras:{}}),{roomsById:x,devicesById:M,sections:B,selectedDevices:X,groupEntries:w}=uh(R,f.target);te(()=>{const g=f.runtimeExtras||{};return!!(g.catalogId||g.catalogKey||g.catalogScenarioId||g.presetId||g.templateId||g.prebuilt===!0||g.origin==="catalog"||g.catalog)});function y(g){if(!g)return{active:!1,progress:null};const S=g.tz||Intl.DateTimeFormat().resolvedOptions().timeZone;if(!S)return{active:!1,progress:null};const U=new Date,Q=new Date(U.toLocaleString("en-US",{timeZone:S})),_e=Q.getDay()===0?7:Q.getDay();if(Array.isArray(g.days)&&g.days.length&&!g.days.includes(_e))return{active:!1,progress:null};const he=at=>{const[qt,Un]=String(at||"00:00").split(":").map(Bn=>Number(Bn)||0);return qt*60+Un};if(g.start?.type!=="clock"||g.end?.type!=="clock")return{active:!1,progress:null};const ue=he(g.start.time),ke=he(g.end.time),ve=Q.getHours()*60+Q.getMinutes()+Q.getSeconds()/60;if(Number.isNaN(ue)||Number.isNaN(ke))return{active:!1,progress:null};if(ue===ke)return{active:!0,progress:0};if(ue<ke)return ve<ue||ve>ke?{active:!1,progress:null}:{active:!0,progress:l((ve-ue)/(ke-ue),0,1)};const Ke=ke+1440,we=ve<ue?ve+1440:ve;return we<ue||we>Ke?{active:!1,progress:null}:{active:!0,progress:l((we-ue)/(Ke-ue),0,1)}}const I=te(()=>{const g=[];return R.devices.forEach(S=>{(Array.isArray(S.properties)?S.properties:[]).forEach(Q=>{const _e=Q?.parameters?.instance;_e==="illumination"&&g.push({id:`${S.id}#${_e}`,name:S.name||"Сенсор",detail:x.value.get(S.room)?.name||"",instance:_e})})}),g.sort((S,U)=>S.name.localeCompare(U.name,"ru"))}),se=Object.freeze([{value:"always",label:"Всегда"},{value:"onlyWhenHome",label:"Когда кто-то дома"},{value:"onlyWhenAway",label:"Когда никого нет дома"}]),J=Ee(!1),Y=Ee(!1),oe=Ee(!1),re=Ee(null),ce=Ee(!1),N=Ee(!1),Z=Ee(!1),me=Ee([]),j=Ee([]),K=Ee(null),W=Ee(""),be=Ee(1),fe=Ee(""),Ce=Ee(!1),xe=Ee(null),ge=Ee(null),O=Ee(`scn_${Math.random().toString(36).slice(2,8)}`),P=te(()=>{if(!X.value.length)return{available:!1,partial:!1,hasSelection:!1};let g=!1,S=!1;return X.value.forEach(U=>{U.supports.brightness?g=!0:S=!0}),{available:g,partial:S,hasSelection:!0}}),ee=te(()=>{const g=ge.value?.result,S=!!g?.active;let U=null,Q="none";if(g){const _e=[g.currentBrightness,g.brightness,g?.current?.brightness,g?.state?.brightness,g?.metrics?.brightness,g?.calc?.brightness,g?.outputs?.brightness];for(const he of _e){const ue=a(he);if(ue!=null){U=ue,Q="backend";break}}if(U==null){const he=Ds(g.state);he!=null&&(U=he,Q="backend")}if(U==null&&Array.isArray(g.debug))for(let he=g.debug.length-1;he>=0;he--){const ue=g.debug[he];if(!ue||typeof ue!="object")continue;const ke=ue.ev;if((ke==="common_value_from_sensor"||ke==="common_value_from_ramp")&&typeof ue.value=="number"){U=ue.value,Q=ke==="common_value_from_sensor"?"sensor":"manual";break}if(ke==="expected_brightness"&&typeof ue.val=="number"){U=ue.val,Q="calculated";break}if((ke==="caps_brightness_manual"||ke==="caps_generic")&&ue.caps){const ve=Ds(ue.caps);if(ve!=null){U=ve,Q=ke==="caps_brightness_manual"?"manual":"calculated";break}}if(U==null){const ve=Ds(ue);if(ve!=null){U=ve,Q="debug";break}}}}return U==null&&f.brightness?.enabled&&(f.brightness.mode==="sensor"?U=l(Math.round(a(f.brightness.sensor?.outputMax)??100),0,100):U=l(Math.round(a(f.brightness.manual?.from)??80),1,100),Q="config"),{active:S,value:U,source:Q}}),k=te(()=>{if(!X.value.length)return{available:!1,partial:!1,hasSelection:!1};let g=!1,S=!1;return X.value.forEach(U=>{U.supports.color?g=!0:S=!0}),{available:g,partial:S,hasSelection:!0}}),F=te(()=>{const g=ge.value?.result,S=!!g?.active;let U=null;const Q=f.color.mode==="colors"?"colors":"temperature";let _e=null,he=null,ue=null,ke="none",ve=null;const Ke=(Te,Ae)=>{const de=a(Te);Number.isFinite(de)&&(_e=l(Math.round(de),2e3,7e3),ke==="none"&&(ke=Ae))},we=(Te,Ae)=>{if(!Te)return;const de={h:l(Math.round(a(Te.h)??0),0,360),s:l(Math.round(a(Te.s)??0),0,100),v:l(Math.round(a(Te.v)??0),0,100)};ue=de,he||(he=Hs(de)),ke==="none"&&(ke=Ae)},at=(Te,Ae)=>{if(!Te)return;const de=String(Te).trim();de&&(he=de.startsWith("#")?de.toUpperCase():`#${de}`.toUpperCase(),ke==="none"&&(ke=Ae))};if(g){const Te=[g.currentColorTemperature,g.colorTemperature,g?.current?.colorTemperature,g?.state?.colorTemperature,g?.metrics?.colorTemperature,g?.calc?.colorTemperature];for(const Ae of Te){if(_e!=null)break;Ke(Ae,"backend")}if(_e==null){const Ae=Ls(g.state);Ae!=null&&Ke(Ae,"backend")}if(!he){const Ae=[g.currentColor,g.color,g?.current?.color,g?.state?.color];for(const de of Ae){if(!de)continue;if(typeof de=="string"){at(de,"backend");break}const ze=Ks(de);if(ze){we(ze,"backend");break}}}if(ve=a(g?.progress)??a(g?._dbg?.progress),Array.isArray(g.debug))for(let Ae=g.debug.length-1;Ae>=0;Ae--){const de=g.debug[Ae];if(!de||typeof de!="object")continue;const ze=de.ev||"debug";if(U===null&&typeof de.active=="boolean"&&ze==="time_progress"&&(U=de.active),typeof ve!="number"&&typeof de.progress=="number"&&(ve=de.progress),_e==null)if(typeof de.safeK=="number")Ke(de.safeK,ze);else{const Je=Ls(de);Je!=null&&Ke(Je,ze)}if(!he||!ue){if(de.hsv)we(de.hsv,ze);else{const Je=Ks(de);Je&&we(Je,ze)}if(!he&&typeof de.color=="string"&&at(de.color,ze),!he&&de.caps){const Je=Ks(de.caps);Je&&we(Je,ze);const gn=Ls(de.caps);gn!=null&&Ke(gn,ze)}}if(_e!=null&&he)break;ze==="time_progress"&&typeof de.progress=="number"&&(ve=de.progress)}}typeof ve=="number"?ve=l(ve,0,1):ve=null;const qt=y(f.time);ve===null&&qt.progress!=null&&(ve=qt.progress);const Bn=(()=>{const Te=new Map;return f.target.devices.forEach(Ae=>{const de=M.value.get(Ae);de&&Te.set(Ae,de)}),f.target.groups.forEach(Ae=>{w.value.find(ze=>ze.id===Ae)?.devices.forEach(ze=>{const Je=M.value.get(ze.id);Je&&Te.set(ze.id,Je)})}),Array.from(Te.values())})();if(Bn.length){const Te=[],Ae=[],de=[];Bn.forEach(Je=>{(Array.isArray(Je.capabilities)?Je.capabilities:[]).forEach(vn=>{if(!vn||vn.type!=="devices.capabilities.color_setting")return;const Ve=vn.state;if(!Ve)return;const jt=Ve.instance,Ze=Ve.value;if(jt==="temperature_k"||jt==="temperature"){let Ge=Ze;if(Number.isFinite(Ge)||(Ze&&typeof Ze=="object"?Ge=a(Ze.temperature_k??Ze.k??Ze.value):typeof Ve.temperature_k=="number"&&(Ge=Ve.temperature_k)),Number.isFinite(Ge)){Te.push(Ge);return}}if(jt==="hsv"){const Ge=Ze&&typeof Ze=="object"?Ze:Ve.hsv;if(Ge){const nn={h:a(Ge.h),s:a(Ge.s),v:a(Ge.v)};if(Number.isFinite(nn.h)&&Number.isFinite(nn.s)&&Number.isFinite(nn.v)){Ae.push({h:l(Math.round(nn.h),0,360),s:l(Math.round(nn.s),0,100),v:l(Math.round(nn.v),0,100)});return}}}if(jt==="rgb"&&Number.isFinite(Ze)){const Ge=rh(Ze);Ge&&de.push(Ge);return}if(jt==="rgb"&&Ze&&typeof Ze=="object"){const Ge={r:a(Ze.r),g:a(Ze.g),b:a(Ze.b)};if(Number.isFinite(Ge.r)&&Number.isFinite(Ge.g)&&Number.isFinite(Ge.b)){de.push(Ge);return}}if(!jt){if(typeof Ve.temperature_k=="number"){Te.push(Ve.temperature_k);return}if(Ve.value&&typeof Ve.value=="object"){const Ge=a(Ve.value.temperature_k??Ve.value.k);if(Number.isFinite(Ge)){Te.push(Ge);return}if(Number.isFinite(Ve.value)){Te.push(Ve.value);return}if("h"in Ve.value&&"s"in Ve.value&&"v"in Ve.value){Ae.push({h:l(Math.round(a(Ve.value.h)??0),0,360),s:l(Math.round(a(Ve.value.s)??0),0,100),v:l(Math.round(a(Ve.value.v)??0),0,100)});return}}}if(Ve.hsv&&typeof Ve.hsv=="object"){Ae.push({h:l(Math.round(a(Ve.hsv.h)??0),0,360),s:l(Math.round(a(Ve.hsv.s)??0),0,100),v:l(Math.round(a(Ve.hsv.v)??0),0,100)});return}typeof Ve.value=="number"&&(jt==="temperature_k"||jt==="temperature")&&Te.push(Ve.value)})});const ze=Je=>Je.length?Je.reduce((gn,vn)=>gn+vn,0)/Je.length:null;_e==null&&Te.length&&(_e=l(Math.round(ze(Te)),2e3,7e3),(ke==="none"||ke==="config")&&(ke="catalog")),!ue&&Ae.length&&(ue=Ae[0],(ke==="none"||ke==="config")&&(ke="catalog")),he||(ue?he=Hs(ue):de.length&&(he=oh(de[0]),(ke==="none"||ke==="config")&&(ke="catalog")))}if(Q==="temperature"&&ve===null&&_e!=null){const Te=a(f.color.temperature.fromK),Ae=a(f.color.temperature.toK);if(Number.isFinite(Te)&&Number.isFinite(Ae)&&Te!==Ae){const de=(_e-Te)/(Ae-Te);ve=l(de,0,1)}}if(Q==="colors"&&(!he||!ue)){const Te=f.color.colors.from,Ae=f.color.colors.to,de=typeof ve=="number"?ve:0;we(lh(Te,Ae,de),ve!=null?"calculated":"config"),ve==null&&(ve=de)}if(_e==null&&Q==="temperature"){const Te=f.color.temperature.fromK,Ae=f.color.temperature.toK,ze=lr(Te,Ae,typeof ve=="number"?ve:0);Ke(ze,ve!=null?"calculated":"config")}const Zi=_e!=null||he||ue,Ar=S||!!U||qt.active||Zi;return Ar?Q==="temperature"?(he=null,ue=null):(_e=null,!he&&ue&&(he=Hs(ue))):(ve=null,Q==="temperature"?_e=null:(he=null,ue=null)),{active:Ar,mode:Q,temperature:_e,colorHex:he,hsv:ue,progress:ve,source:ke}}),D=te(()=>JSON.stringify(ie())),z=te(()=>D.value!==fe.value),ne=te(()=>!!xe.value),h=te(()=>{const g=ge.value?.result?.debug;if(!Array.isArray(g)||!g.length)return"";const S=g.slice(-8);return JSON.stringify(S,null,2)});let m=!1;function b(g){m=!0,f.id=g,m=!1}Mt(()=>f.name,g=>{if(!J.value||n.scenarioId||Ce.value)return;const S=o(g);b(S?S.startsWith("scn_")?S:`scn_${S}`:O.value)}),Mt(()=>f.id,()=>{J.value&&(m||(Ce.value=!0))}),Mt(()=>n.scenarioId,async(g,S)=>{J.value&&g!==S&&(g?await le(g):(A(),$()))});function $(){fe.value=D.value}function A(){b(""),f.name="",f.target.groups=[],f.target.devices=[],f.time={tz:"Europe/Moscow",lat:55.751,lon:37.617,start:{type:"clock",time:"18:00"},end:{type:"clock",time:"23:00"},days:[1,2,3,4,5,6,7]},f.brightness={enabled:!0,mode:"manual",manual:{from:80,to:20},sensor:{sensorId:"",sensorMin:0,sensorMax:2e3,outputMin:10,outputMax:100}},f.color={enabled:!1,mode:"temperature",temperature:{fromK:4e3,toK:2700},colors:{from:{h:35,s:70,v:90},to:{h:210,s:40,v:60}}},f.presence.mode="always",f.runtimeExtras={},be.value=1,me.value=[],j.value=[],K.value=null,W.value="",Ce.value=!1,xe.value=null,ge.value=null}function E(g,S="18:00"){if(g?.type==="sun"||g?.type==="sunrise"||g?.type==="sunset"){const U=g.anchor==="sunset"||g.type==="sunset"?"sunset":"sunrise",Q=g.offsetMin??g.offset??0;return{type:"sun",anchor:U,offsetMin:Number.isFinite(Q)?Number(Q):0}}return{type:"clock",time:g?.time||S}}async function G(){try{const g=await fetch("/config.json");if(!g.ok)throw new Error("config load failed");const S=await g.json();v.scenariosBase=i(S.scenariosUrl||S.scenariosURL||S.scenarioUrl||S.scenariosBase||""),v.apiKey=S.apiKey||S["x-api-key"]||S.api_key||""}catch(g){console.warn("Config load failed",g),v.scenariosBase="",v.apiKey=""}}async function H(g,S={}){if(!v.scenariosBase)throw new Error("scenariosURL не задан в config.json");const U={...S.headers||{}};v.apiKey&&(U["x-api-key"]=v.apiKey),S.body!==void 0&&(U["Content-Type"]=U["Content-Type"]||"application/json");const Q=await fetch(v.scenariosBase+g,{...S,headers:U,body:S.body!==void 0?JSON.stringify(S.body):void 0}),_e=await Q.text();let he=null;try{he=_e?JSON.parse(_e):null}catch{he={raw:_e}}if(!Q.ok){const ue=new Error(he?.error||Q.statusText||"Request failed");throw ue.status=Q.status,ue.data=he,ue}return he}async function L(g=!1){if(!(oe.value&&!g)&&v.scenariosBase){oe.value=!0,re.value=null;try{const S=await H("/catalog");R.devices=Array.isArray(S?.devices)?S.devices:[],R.groups=Array.isArray(S?.groups)?S.groups:[],R.rooms=Array.isArray(S?.rooms)?S.rooms:[]}catch(S){re.value=S}finally{oe.value=!1}}}function V(g,S=null,U=null){if(A(),!g){$();return}b(g.id||n.scenarioId||O.value),f.name=g.name||"",be.value=Number(g.version)||1,f.target.groups=c(g.target?.groups),f.target.devices=c(g.target?.devices);const Q=g.time||{},_e=Array.isArray(Q.days)?Q.days.map(we=>Number(we)).filter(we=>Number.isFinite(we)&&we>=1&&we<=7).sort((we,at)=>we-at):[1,2,3,4,5,6,7];f.time={tz:Q.tz||f.time.tz,lat:Number.isFinite(Number(Q.lat))?Number(Q.lat):f.time.lat,lon:Number.isFinite(Number(Q.lon))?Number(Q.lon):f.time.lon,days:_e.length?_e:[1,2,3,4,5,6,7],start:E(Q.start,"18:00"),end:E(Q.end,"23:00")};const he=g.runtime&&typeof g.runtime=="object"?{...g.runtime}:{},ue=typeof he.presence=="string"?he.presence:"always";ue==="onlyWhenHome"||ue==="onlyWhenAway"?f.presence.mode=ue:f.presence.mode="always",he.presence!==void 0&&delete he.presence,f.runtimeExtras=he;const ke=Array.isArray(g.actions)?g.actions:[],ve=ke.find(we=>we?.type==="light.brightness");ve?(f.brightness.enabled=!0,ve.source?.type==="sensorMap"?(f.brightness.mode="sensor",f.brightness.sensor={sensorId:ve.source.sensorId||"",sensorMin:a(ve.source.sensorMin)??0,sensorMax:a(ve.source.sensorMax)??0,outputMin:l(Math.round(a(ve.source.outputMin)??10),1,100),outputMax:l(Math.round(a(ve.source.outputMax)??100),1,100)}):(f.brightness.mode="manual",f.brightness.manual={from:l(Math.round(a(ve.source?.from)??80),1,100),to:l(Math.round(a(ve.source?.to)??20),1,100)})):f.brightness.enabled=!1;const Ke=ke.find(we=>we?.type?.startsWith("light.color"));Ke?(f.color.enabled=!0,Ke.type==="light.color.hsv"?(f.color.mode="colors",f.color.colors={from:{h:l(Math.round(a(Ke.source?.from?.h)??0),0,360),s:l(Math.round(a(Ke.source?.from?.s)??0),0,100),v:l(Math.round(a(Ke.source?.from?.v)??0),0,100)},to:{h:l(Math.round(a(Ke.source?.to?.h)??0),0,360),s:l(Math.round(a(Ke.source?.to?.s)??0),0,100),v:l(Math.round(a(Ke.source?.to?.v)??0),0,100)}}):Ke.type==="light.color.cct"&&(f.color.mode="temperature",f.color.temperature={fromK:l(Math.round(a(Ke.source?.fromK)??4e3),1e3,1e4),toK:l(Math.round(a(Ke.source?.toK)??2700),1e3,1e4)})):f.color.enabled=!1,Ce.value=!0,me.value=[],j.value=[],K.value=null,W.value="",xe.value=S,ge.value=U,$()}async function le(g){if(!g){A(),$();return}Y.value=!0;try{const S=await H(`/scenario?id=${encodeURIComponent(g)}`);V(S?.scenario,S?.pause||null,S?.status||null)}catch(S){W.value=S.message||"Ошибка загрузки сценария"}finally{Y.value=!1}}function q(g,S="18:00"){return g?.type==="sun"?{type:"sun",anchor:g.anchor==="sunset"?"sunset":"sunrise",offsetMin:Number.isFinite(g.offsetMin)?Math.round(g.offsetMin):0}:{type:"clock",time:String(g?.time||S).trim()||S}}function ie(){const g=c(f.target.groups),S=c(f.target.devices),U=q(f.time.start,"18:00"),Q=q(f.time.end,"23:00"),_e=Array.isArray(f.time.days)?f.time.days.map(we=>Number(we)).filter(we=>Number.isFinite(we)&&we>=1&&we<=7).sort((we,at)=>we-at):[1,2,3,4,5,6,7],he={days:_e.length?_e:[1,2,3,4,5,6,7],start:U,end:Q};f.time.tz&&(he.tz=f.time.tz),Number.isFinite(Number(f.time.lat))&&(he.lat=Number(f.time.lat)),Number.isFinite(Number(f.time.lon))&&(he.lon=Number(f.time.lon));const ue=[];if(f.brightness.enabled)if(f.brightness.mode==="sensor"){const we=f.brightness.sensor;ue.push({type:"light.brightness",source:{type:"sensorMap",sensorId:we.sensorId||"",sensorMin:a(we.sensorMin)??0,sensorMax:a(we.sensorMax)??0,outputMin:l(Math.round(a(we.outputMin)??10),1,100),outputMax:l(Math.round(a(we.outputMax)??100),1,100)}})}else{const we=f.brightness.manual;ue.push({type:"light.brightness",source:{type:"manualRamp",from:l(Math.round(a(we.from)??80),1,100),to:l(Math.round(a(we.to)??20),1,100)}})}if(f.color.enabled)if(f.color.mode==="temperature"){const we=l(Math.round(a(f.color.temperature.fromK)??4e3),1e3,1e4),at=l(Math.round(a(f.color.temperature.toK)??2700),1e3,1e4);ue.push({type:"light.color.cct",applyOnlyIfOn:!0,source:{type:"manualRamp",fromK:we,toK:at}})}else{const we=f.color.colors.from,at=f.color.colors.to,qt={h:l(Math.round(a(we.h)??0),0,360),s:l(Math.round(a(we.s)??0),0,100),v:l(Math.round(a(we.v)??0),0,100)},Un={h:l(Math.round(a(at.h)??0),0,360),s:l(Math.round(a(at.s)??0),0,100),v:l(Math.round(a(at.v)??0),0,100)};ue.push({type:"light.color.hsv",applyOnlyIfOn:!0,source:{type:"manualRamp",from:qt,to:Un}})}const ke={...f.runtimeExtras||{}},ve=f.presence?.mode||"always";ve==="onlyWhenHome"||ve==="onlyWhenAway"?ke.presence=ve:delete ke.presence;const Ke={id:f.id||O.value,version:be.value||1,type:"scenario-v1",name:f.name?.trim()||"Новый сценарий",target:{groups:g,devices:S},time:he,actions:ue};return Object.keys(ke).length&&(Ke.runtime=ke),Ke}function pe(){if(!f.name.trim())return"Укажите имя сценария";if(!f.target.groups.length&&!f.target.devices.length)return"Выберите хотя бы одно устройство";const g=f.time.start,S=f.time.end;if(g.type==="clock"&&!/^\d{2}:\d{2}$/.test(g.time||""))return"Старт: неверный формат времени";if(S.type==="clock"&&!/^\d{2}:\d{2}$/.test(S.time||""))return"Финиш: неверный формат времени";if(g.type==="sun"&&!(g.anchor==="sunrise"||g.anchor==="sunset"))return"Старт: выберите рассвет или закат";if(S.type==="sun"&&!(S.anchor==="sunrise"||S.anchor==="sunset"))return"Финиш: выберите рассвет или закат";if(g.type==="clock"&&S.type==="clock"){const[U,Q]=(g.time||"00:00").split(":").map(Number),[_e,he]=(S.time||"00:00").split(":").map(Number);if(Number.isFinite(U)&&Number.isFinite(Q)&&Number.isFinite(_e)&&Number.isFinite(he)){const ue=U*60+Q,ke=_e*60+he;if(ue>=ke)return"Время окончания должно быть позже старта"}}return f.color.enabled&&!k.value.available?"Выбранные устройства не поддерживают изменение цвета":f.brightness.enabled&&!P.value.available?"Выбранные устройства не поддерживают изменение яркости":null}async function $e(){me.value=[],j.value=[],K.value=null,W.value="";const g=pe();if(g){W.value=g;return}ce.value=!0;try{const S=ie();console.log("Saving scenario payload:",S);const U=await H("/save",{method:"POST",body:{scenario:S}});if(U?.scenario){const Q=U?.trigger?.result?.pause||U?.status?.pause||null,_e=U?.status||null;V(U.scenario,Q,_e),xe.value=Q,ge.value=_e,(U?.status?.result?.reason==="manual_pause"||U?.trigger?.result?.reason==="manual_pause")&&(W.value="Сценарий сохранён, но находится на паузе")}else $();me.value=Array.isArray(U?.warnings)?U.warnings:[],W.value||(W.value="Сценарий сохранён"),s("saved",f.id)}catch(S){S.status===400&&Array.isArray(S.data?.errors)?j.value=S.data.errors:S.status===409?K.value=S.data||{message:"Конфликт сценариев"}:W.value=S.message||"Ошибка сохранения"}finally{ce.value=!1}}async function Ne(){if(!f.id){W.value="Сценарий ещё не сохранён";return}N.value=!0;try{const g=await H("/run",{method:"POST",body:{id:f.id}});if(g?.result){const{active:S,actionsSent:U,reason:Q,pause:_e}=g.result;_e&&(xe.value=_e),g?.status?ge.value=g.status:ge.value={ts:Date.now(),origin:"manual",result:g.result},Q==="manual_pause"?W.value="Сценарий на паузе":Q==="presence_guard"?W.value="Сценарий заблокирован по присутствию":S?(xe.value=null,W.value=`Команды отправлены: ${U||0}`):W.value="Сценарий сейчас вне временного окна"}else W.value="Запуск выполнен"}catch(g){W.value=g.message||"Ошибка запуска"}finally{N.value=!1}}async function Re(){if(!n.scenarioId){W.value="Сценарий ещё не сохранён";return}if(Z.value||!(typeof window<"u"?window.confirm("Удалить сценарий? Действие нельзя отменить."):!0))return;const S=n.scenarioId;Z.value=!0,W.value="",me.value=[],j.value=[],K.value=null;try{await H("/delete",{method:"POST",body:{id:S}}),A(),$(),W.value="Сценарий удалён",s("deleted",S)}catch(U){W.value=U.message||"Не удалось удалить сценарий"}finally{Z.value=!1}}function Xe(g){const S=c(g?.groups),U=c(g?.devices);f.target.groups=S,f.target.devices=U}function Qe(g){!g||typeof g!="object"||(f.brightness={...f.brightness,...g,manual:{...f.brightness.manual,...g.manual||{}},sensor:{...f.brightness.sensor,...g.sensor||{}}})}function pt(g){!g||typeof g!="object"||(f.color={...f.color,...g,temperature:{...f.color.temperature,...g.temperature||{}},colors:{from:{...f.color.colors.from,...g.colors?.from||{}},to:{...f.color.colors.to,...g.colors?.to||{}}}})}async function ht(){if(f.id)try{const g=ne.value?"/resume":"/pause",S=await H(g,{method:"POST",body:{id:f.id}});g==="/pause"?(xe.value=S?.pause||{setAt:Date.now(),reason:{source:"manual"}},S?.status&&!ge.value&&(ge.value=S.status),W.value="Сценарий поставлен на паузу"):(xe.value=S?.result?.pause||null,ge.value=S?.status||(S?.result?{ts:Date.now(),origin:"resume",result:S.result}:null),S?.result?.reason==="manual_pause"?W.value="Сценарий по-прежнему на паузе":S?.result?.reason==="presence_guard"?W.value="Сценарий заблокирован по присутствию":S?.result?.active?W.value=`Команды отправлены: ${S.result.actionsSent||0}`:S?.result?W.value="Сценарий сейчас вне временного окна":W.value="Пауза снята")}catch(g){W.value=g?.message||"Не удалось изменить паузу"}}function Gt(g){if(!g||typeof g!="object")return;const S=Array.isArray(g.days)?g.days:f.time.days,U=Array.isArray(S)?S.map(Q=>Number(Q)).filter(Q=>Number.isFinite(Q)&&Q>=1&&Q<=7).sort((Q,_e)=>Q-_e):f.time.days;f.time={tz:g.tz??f.time.tz,lat:g.lat??f.time.lat,lon:g.lon??f.time.lon,start:g.start?E(g.start,f.time.start?.time||"18:00"):f.time.start,end:g.end?E(g.end,f.time.end?.time||"23:00"):f.time.end,days:U.length?U:f.time.days}}return Kn(async()=>{if(await G(),await L(!0),J.value=!0,n.scenarioId)await le(n.scenarioId);else{A();const g=o(f.name);b(g?g.startsWith("scn_")?g:`scn_${g}`:O.value),$()}}),(g,S)=>(C(),T("main",ch,[d("header",fh,[d("div",dh,[d("div",null,[S[2]||(S[2]=d("h1",null,"Сценарий",-1)),d("p",ph,[d("span",null,ae(f.id),1),z.value?(C(),T("span",hh,"Черновик")):Me("",!0),Y.value?(C(),T("span",mh,"Загрузка…")):Me("",!0)])]),f.id?(C(),T("button",{key:0,type:"button",class:"btn pause",onClick:ht},[ne.value?(C(),T("span",gh,"▶ Возобновить")):(C(),T("span",vh,"⏸ Пауза"))])):Me("",!0)]),d("div",yh,[Ys(d("input",{"onUpdate:modelValue":S[0]||(S[0]=U=>f.name=U),placeholder:"Название сценария"},null,512),[[mu,f.name]])]),ne.value&&xe.value?(C(),T("p",_h,ae(xe.value.until?`На паузе до ${new Date(xe.value.until).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:"На паузе"),1)):Me("",!0)]),ge.value?(C(),T("section",bh,[d("header",wh,[S[3]||(S[3]=d("h2",null,"Статус сценария",-1)),d("small",null,[kt(ae(u(ge.value.ts)),1),ge.value.origin?(C(),T("span",Sh," · "+ae(ge.value.origin),1)):Me("",!0)])]),ge.value.result?(C(),T("p",xh,[d("strong",null,ae(p(ge.value.result)),1),ge.value.result.active?(C(),T("span",kh," · Команды: "+ae(ge.value.result.actionsSent||0),1)):Me("",!0)])):ge.value.error?(C(),T("p",$h,[S[4]||(S[4]=d("strong",null,"Ошибка:",-1)),kt(" "+ae(ge.value.error.message||ge.value.error),1)])):Me("",!0),ge.value.result?.pause?(C(),T("p",Mh,[S[5]||(S[5]=d("strong",null,"Пауза до:",-1)),kt(" "+ae(u(ge.value.result.pause.until)),1)])):Me("",!0),ge.value.result?.presence?(C(),T("p",Eh,[S[6]||(S[6]=d("strong",null,"Presence:",-1)),kt(" "+ae(_(ge.value.result.presence)),1)])):Me("",!0),h.value?(C(),T("details",Ch,[d("summary",null,"Журнал ("+ae(ge.value.result?.debug?.length||0)+")",1),d("pre",null,ae(h.value),1)])):Me("",!0)])):Me("",!0),d("section",Ah,[We(ud,{"model-value":f.target,sections:It(B),loading:oe.value,error:re.value,"show-selected-only":!!((f.id||n.scenarioId)&&(f.target.groups.length||f.target.devices.length)),"onUpdate:modelValue":Xe},null,8,["model-value","sections","loading","error","show-selected-only"]),We(Zd,{"model-value":f.brightness,"sensor-options":I.value,support:P.value,runtime:ee.value,"onUpdate:modelValue":Qe},null,8,["model-value","sensor-options","support","runtime"]),We(sh,{"model-value":f.color,support:k.value,runtime:F.value,"onUpdate:modelValue":pt},null,8,["model-value","support","runtime"]),d("section",Th,[S[7]||(S[7]=d("header",{class:"presence-block__header"},[d("div",null,[d("h2",null,"Присутствие"),d("p",{class:"presence-block__hint"},"Ограничьте выполнение сценария состоянием «кто-то дома» из Wi‑Fi мониторинга.")])],-1)),d("div",Rh,[(C(!0),T(Le,null,it(It(se),U=>(C(),T("label",{key:U.value,class:"presence-option"},[Ys(d("input",{type:"radio",name:"presence-mode",value:U.value,"onUpdate:modelValue":S[1]||(S[1]=Q=>f.presence.mode=Q)},null,8,Ph),[[gu,f.presence.mode]]),d("span",Oh,ae(U.label),1)]))),128))])]),We(Cp,{"model-value":f.time,"onUpdate:modelValue":Gt},null,8,["model-value"])]),d("footer",Ih,[d("button",{type:"button",class:"btn primary",disabled:ce.value||Y.value,onClick:$e},[ce.value?(C(),T("span",Vh,"Сохранение…")):(C(),T("span",Fh,"Сохранить"))],8,Nh),d("button",{type:"button",class:"btn secondary",disabled:N.value||!f.id,onClick:Ne},[N.value?(C(),T("span",Dh,"Применение…")):(C(),T("span",Lh,"Применить сейчас"))],8,jh),d("button",{type:"button",class:"btn danger",disabled:Z.value||!n.scenarioId||Y.value,onClick:Re},[Z.value?(C(),T("span",Hh,"Удаление…")):(C(),T("span",Uh,"Удалить"))],8,Kh)]),d("section",Bh,[j.value.length?(C(),T("div",Wh,[S[8]||(S[8]=d("strong",null,"Ошибки:",-1)),d("ul",null,[(C(!0),T(Le,null,it(j.value,U=>(C(),T("li",{key:U},ae(U),1))),128))])])):Me("",!0),K.value?(C(),T("div",zh,[S[9]||(S[9]=d("strong",null,"Конфликт сценариев",-1)),d("p",null,ae(K.value.message||K.value.error||"Сценарий пересекается с другим"),1),K.value.details?.scenarioId?(C(),T("p",Gh,"ID: "+ae(K.value.details.scenarioId),1)):Me("",!0),Array.isArray(K.value.details?.types)?(C(),T("p",qh,"Типы: "+ae(K.value.details.types.join(", ")),1)):Me("",!0)])):Me("",!0),me.value.length?(C(),T("div",Jh,[S[10]||(S[10]=d("strong",null,"Предупреждения:",-1)),d("ul",null,[(C(!0),T(Le,null,it(me.value,U=>(C(),T("li",{key:U},ae(U),1))),128))])])):Me("",!0),W.value?(C(),T("p",Yh,ae(W.value),1)):Me("",!0)])]))}},Qh=bt(Xh,[["__scopeId","data-v-5b93a87d"]]),Zh={class:"scenario-page"},em={__name:"ScenarioView",setup(e){const t=Rc(),n=Yi(),s=te(()=>t.params.id),r=te(()=>{const a=s.value;return typeof a=="string"?a:""}),o=te(()=>t.name==="scenario-create");function i(a){if(!a)return;const c=r.value;(o.value||c!==a)&&n.replace({name:"scenario-edit",params:{id:a}})}function l(){n.replace({name:"scenarios-list"})}return(a,c)=>(C(),T("div",Zh,[(C(),xr(Qh,{key:o.value?"new":r.value,"scenario-id":o.value?"":r.value,onSaved:i,onDeleted:l},null,8,["scenario-id"]))]))}},To=bt(em,[["__scopeId","data-v-075e6f7b"]]),tm=Ac({history:rc(),routes:[{path:"/",name:"home",component:hf},{path:"/scenarios",name:"scenarios-list",component:Tf},{path:"/scenarios/new",name:"scenario-create",component:To},{path:"/scenarios/:id",name:"scenario-edit",component:To,props:!0}]});$u(Vc).use(tm).mount("#app");
